!function e(t,n,i){function o(u,a){if(!n[u]){if(!t[u]){var l="function"==typeof require&&require;if(!a&&l)return l(u,!0);if(r)return r(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[u]={exports:{}};t[u][0].call(c.exports,function(e){var n=t[u][1][e];return o(n?n:e)},c,c.exports,e,t,n,i)}return n[u].exports}for(var r="function"==typeof require&&require,u=0;u<i.length;u++)o(i[u]);return o}({"/Users/sam/sites/natural-gallery.lan/cache/build.js":[function(e,t,n){var i,o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!function(e){var t;!function(e){var t=function(){function t(){this.old_scroll_top=0;var t=document.getElementsByClassName("pswp")[0];naturalGalleries.forEach(function(n,i){naturalGalleries[i]=new e.Gallery(i,n.options,n.categories,t),n.images&&n.images.constructor===Array&&n.images.length&&(naturalGalleries[i].collection=n.images)}),this.bindEvents()}return t.prototype.resize=function(){naturalGalleries.forEach(function(e){e.resize()})},t.prototype.bindEvents=function(){var e=this;1==naturalGalleries.length&&0===naturalGalleries[0].options.limit&&document.addEventListener("scroll",function(){var t=naturalGalleries[0],n=t.rootElement.offsetTop+t.rootElement.offsetHeight+60,i=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),o=window.innerHeight,r=i-e.old_scroll_top;e.old_scroll_top=i,r>0&&i+o>n&&naturalGalleries[0].addElements(1)})},t}();e.Controller=t}(t=e.Gallery||(e.Gallery={}))}(i||(i={}));var i;!function(e){var t;!function(e){var t=function(){function t(t,n,i,o){void 0===i&&(i=[]),this._options={rowHeight:350,format:"natural",round:3,imagesPerRow:4,margin:3,limit:0,showLabels:"hover",lightbox:!0,minRowsAtStart:2,showCount:!1,searchFilter:!1,categoriesFilter:!1,showNone:!1,showOthers:!1},this._pswpContainer=[],this._collection=[],this._categories=[],this.pswpElement=o;for(var r in this.options)"undefined"==typeof n[r]&&(n[r]=this.options[r]);this.options=n,this.position=t,this.categories=i,this.rootElement=document.getElementsByClassName("natural-gallery").item(this.position),(this.options.searchFilter||this.options.categoriesFilter||this.options.showCount)&&(this.header=new e.Header(this),this.options.searchFilter&&this.header.addFilter(new e.SearchFilter(this.header)),this.options.categoriesFilter&&this.header.addFilter(new e.CategoryFilter(this.header))),this.render(),this.bodyWidth=Math.floor(this.bodyElement.getBoundingClientRect().width)}return t.prototype.render=function(){var t=this,n=document.createElement("div");e.Utility.addClass(n,"natural-gallery-noresults"),n.appendChild(e.Utility.getIcon("icon-noresults"));var i=document.createElement("div");e.Utility.addClass(i,"natural-gallery-next"),i.appendChild(e.Utility.getIcon("icon-next")),i.addEventListener("click",function(e){e.preventDefault(),t.addElements()});var o=document.createElement("iframe");o.addEventListener("load",function(){var e=null;this.contentWindow.addEventListener("resize",function(){clearTimeout(e),e=setTimeout(function(){t.resize()},100)})}),this.bodyElement=document.createElement("div"),e.Utility.addClass(this.bodyElement,"natural-gallery-body"),this.bodyElement.appendChild(n),this.header&&this.rootElement.appendChild(this.header.render()),this.rootElement.appendChild(this.bodyElement),this.rootElement.appendChild(i),this.rootElement.appendChild(o)},t.prototype.appendItems=function(t){var n=!1;0===this.collection.length&&(n=!0),t.forEach(function(t){this._collection.push(new e.Item(t,this))},this),e.Organizer.organize(this),this.header&&this.header.refresh(),n&&this.addElements()},t.prototype.style=function(){this.collection.forEach(function(e){e.style()})},t.prototype.addElements=function(e){void 0===e&&(e=null);var t=this.collection,n=this.rootElement.getElementsByClassName("natural-gallery-next")[0];if(n.style.display="block",this.pswpContainer.length===t.length)return n.style.display="none",void(0===t.length&&(this.rootElement.getElementsByClassName("natural-gallery-noresults")[0].style.display="block",this.rootElement.getElementsByClassName("natural-gallery-images")[0].style.display="none"));e||(e=this.getRowsPerPage(this));for(var i=this.pswpContainer.length,o=this.pswpContainer.length?t[i].row+e:e,r=i;r<t.length;r++){var u=t[r];u.row<o&&(this.pswpContainer.push(u.getPswpItem()),this.bodyElement.appendChild(u.loadElement()),u.bindClick(),u.flash()),this.pswpContainer.length===t.length&&(n.style.display="none")}var a=this.rootElement.getElementsByClassName("natural-gallery-noresults")[0];a&&(a.style.display="none");var l=this.rootElement.getElementsByClassName("natural-gallery-images")[0];l&&(l.style.display="block");var s=this.rootElement.getElementsByClassName("natural-gallery-visible")[0];s&&(s.textContent=String(this.pswpContainer.length));var c=this.rootElement.getElementsByClassName("natural-gallery-total")[0];c&&(c.textContent=String(t.length))},t.prototype.getRowsPerPage=function(e){if(this.options.limit)return this.options.limit;var t=window.outerHeight,n=t-e.bodyElement.offsetTop,i=Math.floor(n/(.7*this.options.rowHeight));return i<this.options.minRowsAtStart?this.options.minRowsAtStart:i},t.prototype.resize=function(){var t=Math.floor(this.bodyElement.getBoundingClientRect().width);if(t!=this.bodyWidth){this.bodyWidth=t,e.Organizer.organize(this);var n=this.collection[this.pswpContainer.length-1].row+1;this.reset(),this.addElements(n)}},t.prototype.refresh=function(){this.reset(),e.Organizer.organize(this),this.addElements()},t.prototype.reset=function(){this.pswpContainer=[],this._collection.forEach(function(e){e.remove()});var e=this.rootElement.getElementsByClassName("natural-gallery-noresults")[0];e&&(e.style.display="none")},t.prototype.cleanCollection=function(e){return e.filter(function(e){return!e.excluded})},Object.defineProperty(t.prototype,"pswpContainer",{get:function(){return this._pswpContainer},set:function(e){this._pswpContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collection",{get:function(){var e=this.header&&this.header.isFiltered()?this.header.collection:this._collection;return this.cleanCollection(e)},set:function(e){this._collection=[],this.appendItems(e)},enumerable:!0,configurable:!0}),t.prototype.getOriginalCollection=function(){return this.cleanCollection(this._collection)},Object.defineProperty(t.prototype,"bodyWidth",{get:function(){return this._bodyWidth},set:function(e){this._bodyWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bodyElement",{get:function(){return this._bodyElement},set:function(e){this._bodyElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rootElement",{get:function(){return this._rootElement},set:function(e){this._rootElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pswpApi",{get:function(){return this._pswpApi},set:function(e){this._pswpApi=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pswpElement",{get:function(){return this._pswpElement},set:function(e){this._pswpElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},set:function(e){this._options=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){this._position=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this._header},set:function(e){this._header=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categories",{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),t}();e.Gallery=t}(t=e.Gallery||(e.Gallery={}))}(i||(i={}));var i;!function(e){var t;!function(e){var t=function(){function t(e,t){this.fields=e,this.gallery=t,this._binded=!1,this._excluded=!1,this.id=e.id,this.thumbnail=e.thumbnail,this.enlarged=e.enlarged,this.title=this.getTitle(e),this.link=this.getLink(e),this.linkTarget=this.getLinkTarget(e),this.tWidth=e.tWidth,this.tHeight=e.tHeight,this.eWidth=e.eWidth,this.eHeight=e.eHeight,this.categories=e.categories,this.last=e.last,this.createElement()}return t.prototype.getTitle=function(e){return e.title?this.getTitleDetails(e.title).title:null},t.prototype.getLink=function(e){return e.link?e.link:this.getTitleDetails(e.title).link},t.prototype.getLinkTarget=function(e){return e.linkTarget?e.linkTarget:this.getTitleDetails(e.title).linkTarget},t.prototype.getTitleDetails=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.getElementsByTagName("a"),i={title:t.textContent,link:null,linkTarget:null};return n[0]&&(i.link=n[0].getAttribute("href"),i.linkTarget=n[0].getAttribute("target")),i},t.prototype.createElement=function(){var t=this.gallery.options,n=null;this.title&&["true","hover"].indexOf(t.showLabels)>-1&&(n=!0);var i=document.createElement("div"),o=document.createElement("div"),r=this.getLinkElement();if(t.lightbox&&n&&r?(n=r,e.Utility.addClass(n,"button"),e.Utility.addClass(o,"zoomable")):t.lightbox&&n&&!r?(n=document.createElement("div"),e.Utility.addClass(i,"zoomable")):t.lightbox&&!n?e.Utility.addClass(i,"zoomable"):!t.lightbox&&n&&r?(i=r,n=document.createElement("div")):t.lightbox||!n||r?t.lightbox||n||!r||(i=r):n=document.createElement("div"),e.Utility.addClass(o,"image"),e.Utility.addClass(i,"figure loading visible"),o.style.backgroundImage="url("+this.thumbnail+")",i.appendChild(o),t.round){var u=String(t.round+"px");i.style.borderRadius=u,o.style.borderRadius=u}this.element=i,this.image=o,n&&(n.textContent=this.title,e.Utility.addClass(n,"title"),"hover"==t.showLabels&&e.Utility.addClass(n,"hover"),i.appendChild(n))},t.prototype.getLinkElement=function(){var t=null;return this.link&&(t=document.createElement("a"),t.setAttribute("href",this.link),e.Utility.addClass(t,"link"),this.linkTarget&&t.setAttribute("target",this.linkTarget)),t},t.prototype.style=function(){e.Utility.removeClass(this.element,"visible"),this.element.style.width=String(this.width+"px"),this.element.style.height=String(this.height+"px"),this.element.style.marginRight=String(this.gallery.options.margin+"px"),this.element.style.marginBottom=String(this.gallery.options.margin+"px"),this.last&&(this.element.style.marginRight="0"),this.image.style.width=String(this.width+"px"),this.image.style.height=String(this.height+"px");var t=this;window.setTimeout(function(){e.Utility.addClass(t.element,"visible")},0)},t.prototype.flash=function(){var t=this;e.Utility.removeClass(this.element,"visible"),window.setTimeout(function(){e.Utility.addClass(t.element,"visible")},0)},t.prototype.bindClick=function(){if(this.gallery.options.lightbox){var e=this;if(!this.binded){this.binded=!0;var t=function(t){e.openPhotoSwipe.call(e,t,e.element)},n=null;n=this.link?this.image:this.element,n.addEventListener("click",t)}}},t.prototype.openPhotoSwipe=function(e,t){if(e.preventDefault(),this.gallery.options.lightbox){var n=Array.prototype.slice.call(t.parentNode.children),i=n.indexOf(t)-1,o={index:i,bgOpacity:.85,showHideOpacity:!0,loop:!1},a=new r(this.gallery.pswpElement,u,this.gallery.pswpContainer,o);this.gallery.pswpApi=a,a.init();var l=null;a.listen("beforeChange",function(e){e>0&&a.getCurrentIndex()==a.items.length-1?this.gallery.addElements():e===-1*(a.items.length-1)&&(l=a.items.length,this.gallery.addElements())}),a.listen("afterChange",function(){l&&(a.goTo(l),l=null)})}},t.prototype.getPswpItem=function(){return{src:this._enlarged,w:this._eWidth,h:this._eHeight,title:this._title}},t.prototype.getElement=function(){return this.element},t.prototype.loadElement=function(){var t=this,n=document.createElement("img");return n.setAttribute("src",this.thumbnail),n.addEventListener("load",function(){e.Utility.removeClass(t.element,"loading"),e.Utility.addClass(t.element,"loaded")}),n.addEventListener("error",function(){e.Utility.addClass(t.element,"errored")}),this.element},t.prototype.remove=function(){this.getElement().parentNode&&this.getElement().parentNode.removeChild(this.getElement())},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thumbnail",{get:function(){return this._thumbnail},set:function(e){this._thumbnail=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enlarged",{get:function(){return this._enlarged},set:function(e){this._enlarged=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tWidth",{get:function(){return this._tWidth},set:function(e){this._tWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tHeight",{get:function(){return this._tHeight},set:function(e){this._tHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eWidth",{get:function(){return this._eWidth},set:function(e){this._eWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eHeight",{get:function(){return this._eHeight},set:function(e){this._eHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this._last},set:function(e){this._last=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categories",{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"row",{get:function(){return this._row},set:function(e){this._row=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this._description},set:function(e){this._description=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binded",{get:function(){return this._binded},set:function(e){this._binded=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"link",{get:function(){return this._link},set:function(e){this._link=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linkTarget",{get:function(){return this._linkTarget},set:function(e){this._linkTarget=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"excluded",{get:function(){return this._excluded},set:function(e){this._excluded=e},enumerable:!0,configurable:!0}),t}();e.Item=t}(t=e.Gallery||(e.Gallery={}))}(i||(i={}));var i;!function(e){var t;!function(e){var t;!function(e){function t(e){"natural"==e.options.format?this.organizeNatural(e.collection,e.bodyWidth,e.options.rowHeight,e.options.margin):"square"==e.options.format&&this.organizeSquare(e.collection,e.bodyWidth,e.options.imagesPerRow,e.options.margin),e.style()}function n(e,t,n,i){i||(i=0),n||(n=4);for(var o=(t-(n-1)*i)/n,r=0;r<e.length;r++){var u=e[r];u.width=Math.floor(o),u.height=Math.floor(o),u.last=r%n===n-1,u.row=Math.floor(r/n)}}function i(e,t,n,i,o){void 0===o&&(o=null),o||(o=0),i||(i=0),n||(n=300);for(var r=1;r<=e.length;r++){var u=e.slice(0,r),a=this.getRowWidth(n,i,u);if(a>=t){this.computeSizes(u,t,i,o),this.organizeNatural(e.slice(r),t,n,i,o+1);break}if(r==e.length){this.computeSizes(u,null,i,o,n);break}}}function o(e,t,n,i,o){void 0===o&&(o=null);for(var r=t?this.getRowHeight(t,n,e):o,u=this.getRowWidth(r,n,e),a=t?this.apportionExcess(e,t,u):0,l=0,s=0;s<e.length;s++){var c=e[s],d=this.getImageRatio(c)*r-a;l+=d-Math.floor(d),d=Math.floor(d),(l>=1||s===e.length-1&&1===Math.round(l))&&(d++,l--),c.width=d,c.height=Math.floor(r),c.row=i,c.last=s==e.length-1}}function r(e,t,n){return t*(n.length-1)+this.getRatios(n)*e}function u(e,t,n){return e/this.getRatios(n)+t*(n.length-1)}function a(e){for(var t=this,n=0,i=0;i<e.length;i++)n+=t.getImageRatio(e[i]);return n}function l(e){return Number(e.tWidth)/Number(e.tHeight)}function s(e,t,n){var i=n-t,o=i/e.length;return o}e.organize=t,e.organizeSquare=n,e.organizeNatural=i,e.computeSizes=o,e.getRowWidth=r,e.getRowHeight=u,e.getRatios=a,e.getImageRatio=l,e.apportionExcess=s}(t=e.Organizer||(e.Organizer={}))}(t=e.Gallery||(e.Gallery={}))}(i||(i={}));var i;!function(e){var t;!function(e){var t;!function(e){function t(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("viewBox","0 0 100 100"),t.innerHTML='<use xlink:href="#'+e+'"></use>',t}function n(e,t,n){void 0===t&&(t=250),void 0===n&&(n=!1);var i;return function(){var o=this,r=arguments,u=function(){i=null,n||e.apply(o,r)},a=n&&!i;clearTimeout(i),i=setTimeout(u,t),a&&e.apply(o,r)}}function i(e,t){if(e&&t){var n=e.className,i=n.indexOf(t);i==-1?e.className+=" "+t:this.removeClass(e,t)}}function o(e,t){var n=e.className.indexOf(t);n>-1&&(e.className=e.className.substr(0,n)+e.className.substr(n+t.length))}function r(e,t){var n=e.className.indexOf(t);n==-1&&(e.className+=" "+t),e.className=e.className.replace(/  +/g," ").trim()}function u(e){for(var t=0;t<c.length;t++)e=e.replace(c[t].letters,c[t].base);return e}function a(e,t){var n=[];return e.forEach(function(e){var i=n.some(function(n){return e[t]==n[t]});i||n.push(e)}),n}function l(e,t,n){var i=[];return e.forEach(function(e){var o=t.some(function(t){return e[n]==t[n]});o||i.push(e)}),i}function s(e,t,n){var i=[];return e.forEach(function(e){var o=t.some(function(t){return e[n]==t[n]});o&&i.push(e)}),i}e.getIcon=t,e.debounce=n,e.toggleClass=i,e.removeClass=o,e.addClass=r,e.removeDiacritics=u,e.uniqBy=a,e.differenceBy=l,e.intersectionBy=s;var c=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}]}(t=e.Utility||(e.Utility={}))}(t=e.Gallery||(e.Gallery={}))}(i||(i={}));var i;!function(e){var t;!function(e){var t=function(){function e(e){this.header=e,this._collection=null}return e.prototype.isActive=function(){return null!==this.collection},Object.defineProperty(e.prototype,"collection",{get:function(){return this._collection},set:function(e){this._collection=e},enumerable:!0,configurable:!0}),e}();e.AbstractFilter=t}(t=e.Gallery||(e.Gallery={}))}(i||(i={}));var i;!function(e){var t;!function(e){var t=function(){function t(e,t,n){this.filter=n,this._isActive=!0,this.id=e,this.title=t}return t.prototype.render=function(){var t=this;this.element=document.createElement("label");var n=document.createElement("input");n.setAttribute("type","checkbox"),n.setAttribute("checked","checked"),n.addEventListener("change",function(){t.isActive=!t.isActive,t.filter.filter()}),this.element.appendChild(n);var i=document.createElement("span");i.textContent=this.title;var o=document.createElement("span");e.Utility.addClass(o,"label"),o.appendChild(e.Utility.getIcon("icon-category")),o.appendChild(i),this.element.appendChild(o);var r=document.createElement("span");return e.Utility.addClass(r,"bar"),this.element.appendChild(r),this.element},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},set:function(e){this._isActive=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),t}();e.Category=t}(t=e.Gallery||(e.Gallery={}))}(i||(i={}));var i;!function(e){var t;!function(e){var t=function(t){function n(e){var n=t.call(this,e)||this;return n.header=e,n._categories=[],n}return o(n,t),Object.defineProperty(n.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),n.prototype.render=function(){if(this.prepare(),!this.element){this.element=document.createElement("div"),e.Utility.addClass(this.element,"natural-gallery-categories sectionContainer");var t=document.createElement("div");e.Utility.addClass(t,"sectionName"),t.textContent="Categories",this.element.appendChild(t)}var n=this.element.getElementsByTagName("label")[0];return n&&n.parentNode.removeChild(n),this.categories.forEach(function(e){this.element.appendChild(e.render())},this),this.element},n.prototype.prepare=function(){var t=[];this.header.gallery.categories.forEach(function(n){t.push(new e.Category(n.id,n.title,this))},this),this.none=new e.Category((-1),"None",this),this.others=new e.Category((-2),"Others",this),this.header.gallery.options.showNone&&t.length&&t.push(this.none),this.header.gallery.options.showOthers&&t.length&&t.push(this.others);var n=[];this.header.gallery.getOriginalCollection().forEach(function(i){(!i.categories||i.categories&&0===i.categories.length&&this.header.gallery.options.showNone)&&(i.categories=[this.none]),t.length&&e.Utility.differenceBy(i.categories,t,"id").length===i.categories.length&&this.header.gallery.options.showOthers&&(i.categories=[this.others]),i.categories.forEach(function(t){n.push(new e.Category(t.id,t.title,this))},this)},this),t=e.Utility.uniqBy(t,"id"),n=e.Utility.uniqBy(n,"id"),t.length?this.categories=e.Utility.intersectionBy(t,n,"id"):this.categories=n},n.prototype.filter=function(){var e=this.categories.filter(function(e){return e.isActive});if(e.length===this.categories.length)this.collection=null;else if(0===e.length)this.collection=[];else{var t=[];this.header.gallery.getOriginalCollection().forEach(function(n){!n.categories||n.categories&&0===n.categories.length?this.none&&t.push(n):n.categories.some(function(i){var o=e.some(function(e){return i.id===e.id});if(o)return t.push(n),!0})},this),this.collection=t}this.header.filter()},Object.defineProperty(n.prototype,"categories",{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"others",{get:function(){return this._others},set:function(e){this._others=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"none",{get:function(){return this._none},set:function(e){this._none=e},enumerable:!0,configurable:!0}),n}(e.AbstractFilter);e.CategoryFilter=t}(t=e.Gallery||(e.Gallery={}))}(i||(i={}));var i;!function(e){var t;!function(e){var t=function(){function t(e){this._collection=null,this._filters=[],this.gallery=e}return t.prototype.addFilter=function(e){this.filters.push(e)},t.prototype.refresh=function(){this.filters.forEach(function(e){e.render()})},t.prototype.render=function(){var t=document.createElement("div");e.Utility.addClass(t,"natural-gallery-images sectionContainer"),t.appendChild(e.Utility.getIcon("icon-pict"));var n=document.createElement("div");e.Utility.addClass(n,"sectionName"),n.textContent="Images",t.appendChild(n);var i=document.createElement("span");t.appendChild(i),e.Utility.addClass(i,"natural-gallery-visible");var o=document.createElement("span");o.textContent="/",t.appendChild(o);var r=document.createElement("span");return e.Utility.addClass(r,"natural-gallery-total"),t.appendChild(r),this.element=document.createElement("div"),this.filters.forEach(function(e){this.element.appendChild(e.render())},this),e.Utility.addClass(this.element,"natural-gallery-header"),this.element.appendChild(t),this.element},t.prototype.isFiltered=function(){return null!==this.collection},t.prototype.filter=function(){var t=null;this.filters.forEach(function(n){n.isActive()&&(t=null===t?n.collection:e.Utility.intersectionBy(t,n.collection,"id"))}),this.collection=t,this.gallery.refresh()},Object.defineProperty(t.prototype,"collection",{get:function(){return this._collection},set:function(e){this._collection=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gallery",{get:function(){return this._gallery},set:function(e){this._gallery=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters},set:function(e){this._filters=e},enumerable:!0,configurable:!0}),t}();e.Header=t;
}(t=e.Gallery||(e.Gallery={}))}(i||(i={}));var i;!function(e){var t;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return o(n,t),n.prototype.render=function(){var t=document.createElement("div");e.Utility.addClass(t,"natural-gallery-searchTerm sectionContainer"),t.appendChild(e.Utility.getIcon("icon-search")),t.appendChild(this.getInput());var n=document.createElement("label");e.Utility.addClass(n,"sectionName"),n.textContent="Search",t.appendChild(n);var i=document.createElement("span");return e.Utility.addClass(i,"bar"),t.appendChild(i),t},n.prototype.getInput=function(){var e=this,t=document.createElement("input");return t.setAttribute("required",""),t.addEventListener("keyup",function(t){var n=this;27==t.keyCode&&(n.value=""),e.filter(n.value)}),t},n.prototype.filter=function(t){this.collection=null;var n=e.Utility.removeDiacritics(t).toLowerCase();n.length>0&&(this.collection=[],this.header.gallery.getOriginalCollection().forEach(function(t){var i=e.Utility.removeDiacritics(t.title+" "+(t.description?t.description:"")).toLowerCase();i.search(n)!=-1&&this.collection.push(t)},this)),this.header.filter()},n}(e.AbstractFilter);e.SearchFilter=t}(t=e.Gallery||(e.Gallery={}))}(i||(i={}));var r=e("photoswipe"),u=e("../node_modules/photoswipe/dist/photoswipe-ui-default");new i.Gallery.Controller},{"../node_modules/photoswipe/dist/photoswipe-ui-default":"/Users/sam/sites/natural-gallery.lan/node_modules/photoswipe/dist/photoswipe-ui-default.js",photoswipe:"/Users/sam/sites/natural-gallery.lan/node_modules/photoswipe/dist/photoswipe.js"}],"/Users/sam/sites/natural-gallery.lan/node_modules/photoswipe/dist/photoswipe-ui-default.js":[function(e,t,n){!function(e,i){"function"==typeof define&&define.amd?define(i):"object"==typeof n?t.exports=i():e.PhotoSwipeUI_Default=i()}(this,function(){"use strict";var e=function(e,t){var n,i,o,r,u,a,l,s,c,d,p,h,f,m,g,y,E,v,b,C=this,w=!1,x=!0,F=!0,A={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},D=function(e){if(y)return!0;e=e||window.event,g.timeToIdle&&g.mouseUsed&&!c&&R();for(var n,i,o=e.target||e.srcElement,r=o.getAttribute("class")||"",u=0;u<G.length;u++)n=G[u],n.onTap&&r.indexOf("pswp__"+n.name)>-1&&(n.onTap(),i=!0);if(i){e.stopPropagation&&e.stopPropagation(),y=!0;var a=t.features.isOldAndroid?600:30;E=setTimeout(function(){y=!1},a)}},_=function(){return!e.likelyTouchDevice||g.mouseUsed||screen.width>g.fitControlsWidth},T=function(e,n,i){t[(i?"add":"remove")+"Class"](e,"pswp__"+n)},I=function(){var e=1===g.getNumItemsFn();e!==m&&(T(i,"ui--one-slide",e),m=e)},O=function(){T(l,"share-modal--hidden",F)},k=function(){return F=!F,F?(t.removeClass(l,"pswp__share-modal--fade-in"),setTimeout(function(){F&&O()},300)):(O(),setTimeout(function(){F||t.addClass(l,"pswp__share-modal--fade-in")},30)),F||S(),!1},B=function(t){t=t||window.event;var n=t.target||t.srcElement;return e.shout("shareLinkClick",t,n),!!n.href&&(!!n.hasAttribute("download")||(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),F||k(),!1))},S=function(){for(var e,t,n,i,o,r="",u=0;u<g.shareButtons.length;u++)e=g.shareButtons[u],n=g.getImageURLForShare(e),i=g.getPageURLForShare(e),o=g.getTextForShare(e),t=e.url.replace("{{url}}",encodeURIComponent(i)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(o)),r+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",g.parseShareButtonOut&&(r=g.parseShareButtonOut(e,r));l.children[0].innerHTML=r,l.children[0].onclick=B},P=function(e){for(var n=0;n<g.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+g.closeElClasses[n]))return!0},M=0,R=function(){clearTimeout(b),M=0,c&&C.setIdle(!1)},L=function(e){e=e?e:window.event;var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(b),b=setTimeout(function(){C.setIdle(!0)},g.timeToIdleOutside))},U=function(){g.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=C.getFullscreenAPI()),n?(t.bind(document,n.eventK,C.updateFullscreen),C.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},N=function(){g.preloaderEl&&(z(!0),d("beforeChange",function(){clearTimeout(f),f=setTimeout(function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&z(!1):z(!0)},g.loadingIndicatorDelay)}),d("imageLoadComplete",function(t,n){e.currItem===n&&z(!0)}))},z=function(e){h!==e&&(T(p,"preloader--active",!e),h=e)},Z=function(e){var n=e.vGap;if(_()){var u=g.barsSize;if(g.captionEl&&"auto"===u.bottom)if(r||(r=t.createEl("pswp__caption pswp__caption--fake"),r.appendChild(t.createEl("pswp__caption__center")),i.insertBefore(r,o),t.addClass(i,"pswp__ui--fit")),g.addCaptionHTMLFn(e,r,!0)){var a=r.clientHeight;n.bottom=parseInt(a,10)||44}else n.bottom=u.top;else n.bottom="auto"===u.bottom?0:u.bottom;n.top=u.top}else n.top=n.bottom=0},j=function(){g.timeToIdle&&d("mouseUsed",function(){t.bind(document,"mousemove",R),t.bind(document,"mouseout",L),v=setInterval(function(){M++,2===M&&C.setIdle(!0)},g.timeToIdle/2)})},H=function(){d("onVerticalDrag",function(e){x&&e<.95?C.hideControls():!x&&e>=.95&&C.showControls()});var e;d("onPinchClose",function(t){x&&t<.9?(C.hideControls(),e=!0):e&&!x&&t>.9&&C.showControls()}),d("zoomGestureEnded",function(){e=!1,e&&!x&&C.showControls()})},G=[{name:"caption",option:"captionEl",onInit:function(e){o=e}},{name:"share-modal",option:"shareEl",onInit:function(e){l=e},onTap:function(){k()}},{name:"button--share",option:"shareEl",onInit:function(e){a=e},onTap:function(){k()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){u=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){p=e}}],W=function(){var e,n,o,r=function(i){if(i)for(var r=i.length,u=0;u<r;u++){e=i[u],n=e.className;for(var a=0;a<G.length;a++)o=G[a],n.indexOf("pswp__"+o.name)>-1&&(g[o.option]?(t.removeClass(e,"pswp__element--disabled"),o.onInit&&o.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};r(i.children);var u=t.getChildByClass(i,"pswp__top-bar");u&&r(u.children)};C.init=function(){t.extend(e.options,A,!0),g=e.options,i=t.getChildByClass(e.scrollWrap,"pswp__ui"),d=e.listen,H(),d("beforeChange",C.update),d("doubleTap",function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(g.getDoubleTapZoom(!1,e.currItem),t,333)}),d("preventDragEvent",function(e,t,n){var i=e.target||e.srcElement;i&&i.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(i.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)}),d("bindEvents",function(){t.bind(i,"pswpTap click",D),t.bind(e.scrollWrap,"pswpTap",C.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",C.onMouseOver)}),d("unbindEvents",function(){F||k(),v&&clearInterval(v),t.unbind(document,"mouseout",L),t.unbind(document,"mousemove",R),t.unbind(i,"pswpTap click",D),t.unbind(e.scrollWrap,"pswpTap",C.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",C.onMouseOver),n&&(t.unbind(document,n.eventK,C.updateFullscreen),n.isFullscreen()&&(g.hideAnimationDuration=0,n.exit()),n=null)}),d("destroy",function(){g.captionEl&&(r&&i.removeChild(r),t.removeClass(o,"pswp__caption--empty")),l&&(l.children[0].onclick=null),t.removeClass(i,"pswp__ui--over-close"),t.addClass(i,"pswp__ui--hidden"),C.setIdle(!1)}),g.showAnimationDuration||t.removeClass(i,"pswp__ui--hidden"),d("initialZoomIn",function(){g.showAnimationDuration&&t.removeClass(i,"pswp__ui--hidden")}),d("initialZoomOut",function(){t.addClass(i,"pswp__ui--hidden")}),d("parseVerticalMargin",Z),W(),g.shareEl&&a&&l&&(F=!0),I(),j(),U(),N()},C.setIdle=function(e){c=e,T(i,"ui--idle",e)},C.update=function(){x&&e.currItem?(C.updateIndexIndicator(),g.captionEl&&(g.addCaptionHTMLFn(e.currItem,o),T(o,"caption--empty",!e.currItem.title)),w=!0):w=!1,F||k(),I()},C.updateFullscreen=function(i){i&&setTimeout(function(){e.setScrollOffset(0,t.getScrollY())},50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},C.updateIndexIndicator=function(){g.counterEl&&(u.innerHTML=e.getCurrentIndex()+1+g.indexIndicatorSep+g.getNumItemsFn())},C.onGlobalTap=function(n){n=n||window.event;var i=n.target||n.srcElement;if(!y)if(n.detail&&"mouse"===n.detail.pointerType){if(P(i))return void e.close();t.hasClass(i,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?g.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(g.tapToToggleControls&&(x?C.hideControls():C.showControls()),g.tapToClose&&(t.hasClass(i,"pswp__img")||P(i)))return void e.close()},C.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;T(i,"ui--over-close",P(t))},C.hideControls=function(){t.addClass(i,"pswp__ui--hidden"),x=!1},C.showControls=function(){x=!0,w||C.update(),t.removeClass(i,"pswp__ui--hidden")},C.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},C.getFullscreenAPI=function(){var t,n=document.documentElement,i="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:i}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+i}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+i}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){return s=g.closeOnScroll,g.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?e.template[this.enterK]():void e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return g.closeOnScroll=s,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}};return e})},{}],"/Users/sam/sites/natural-gallery.lan/node_modules/photoswipe/dist/photoswipe.js":[function(e,t,n){!function(e,i){"function"==typeof define&&define.amd?define(i):"object"==typeof n?t.exports=i():e.PhotoSwipe=i()}(this,function(){"use strict";var e=function(e,t,n,i){var o={features:null,bind:function(e,t,n,i){var o=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var r=0;r<t.length;r++)t[r]&&e[o](t[r],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){o.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){o.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(o.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(o.features)return o.features;var e=o.createEl(),t=e.style,n="",i={};if(i.oldIE=document.all&&!document.addEventListener,i.touch="ontouchstart"in window,window.requestAnimationFrame&&(i.raf=window.requestAnimationFrame,i.caf=window.cancelAnimationFrame),i.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!i.pointerEvent){var r=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var u=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);u&&u.length>0&&(u=parseInt(u[1],10),u>=1&&u<8&&(i.isOldIOSPhone=!0))}var a=r.match(/Android\s([0-9\.]*)/),l=a?a[1]:0;l=parseFloat(l),l>=1&&(l<4.4&&(i.isOldAndroid=!0),i.androidVersion=l),i.isMobileOpera=/opera mini|opera mobi/i.test(r)}for(var s,c,d=["transform","perspective","animationName"],p=["","webkit","Moz","ms","O"],h=0;h<4;h++){n=p[h];for(var f=0;f<3;f++)s=d[f],c=n+(n?s.charAt(0).toUpperCase()+s.slice(1):s),!i[s]&&c in t&&(i[s]=c);n&&!i.raf&&(n=n.toLowerCase(),i.raf=window[n+"RequestAnimationFrame"],i.raf&&(i.caf=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]))}if(!i.raf){var m=0;i.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-m)),i=window.setTimeout(function(){e(t+n)},n);return m=t+n,i},i.caf=function(e){clearTimeout(e)}}return i.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,o.features=i,i}};o.detectFeatures(),o.features.oldIE&&(o.bind=function(e,t,n,i){t=t.split(" ");for(var o,r=(i?"detach":"attach")+"Event",u=function(){n.handleEvent.call(n)},a=0;a<t.length;a++)if(o=t[a])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=u;e[r]("on"+o,n["oldIE"+o])}else e[r]("on"+o,n)});var r=this,u=25,a=3,l={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};o.extend(l,i);var s,c,d,p,h,f,m,g,y,E,v,b,C,w,x,F,A,D,_,T,I,O,k,B,S,P,M,R,L,U,N,z,Z,j,H,G,W,K,q,Y,V,X,J,$,Q,ee,te,ne,ie,oe,re,ue,ae,le,se,ce,de,pe=function(){return{x:0,y:0}},he=pe(),fe=pe(),me=pe(),ge={},ye=0,Ee={},ve=pe(),be=0,Ce=!0,we=[],xe={},Fe=!1,Ae=function(e,t){o.extend(r,t.publicMethods),we.push(e)},De=function(e){var t=en();return e>t-1?e-t:e<0?t+e:e},_e={},Te=function(e,t){return _e[e]||(_e[e]=[]),_e[e].push(t)},Ie=function(e){var t=_e[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(r,n)}},Oe=function(){return(new Date).getTime()},ke=function(e){se=e,r.bg.style.opacity=e*l.bgOpacity},Be=function(e,t,n,i,o){(!Fe||o&&o!==r.currItem)&&(i/=o?o.fitRatio:r.currItem.fitRatio),e[O]=b+t+"px, "+n+"px"+C+" scale("+i+")"},Se=function(e){oe&&(e&&(E>r.currItem.fitRatio?Fe||(hn(r.currItem,!1,!0),Fe=!0):Fe&&(hn(r.currItem),Fe=!1)),Be(oe,me.x,me.y,E))},Pe=function(e){e.container&&Be(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Me=function(e,t){t[O]=b+e+"px, 0px"+C},Re=function(e,t){if(!l.loop&&t){var n=p+(ve.x*ye-e)/ve.x,i=Math.round(e-vt.x);(n<0&&i>0||n>=en()-1&&i<0)&&(e=vt.x+i*l.mainScrollEndFriction)}vt.x=e,Me(e,h)},Le=function(e,t){var n=bt[e]-Ee[e];return fe[e]+he[e]+n-n*(t/v)},Ue=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Ne=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},ze=null,Ze=function(){ze&&(o.unbind(document,"mousemove",Ze),o.addClass(e,"pswp--has_mouse"),l.mouseUsed=!0,Ie("mouseUsed")),ze=setTimeout(function(){ze=null},100)},je=function(){o.bind(document,"keydown",r),N.transform&&o.bind(r.scrollWrap,"click",r),l.mouseUsed||o.bind(document,"mousemove",Ze),o.bind(window,"resize scroll orientationchange",r),Ie("bindEvents")},He=function(){o.unbind(window,"resize scroll orientationchange",r),o.unbind(window,"scroll",y.scroll),o.unbind(document,"keydown",r),o.unbind(document,"mousemove",Ze),N.transform&&o.unbind(r.scrollWrap,"click",r),q&&o.unbind(window,m,r),clearTimeout(z),Ie("unbindEvents")},Ge=function(e,t){var n=sn(r.currItem,ge,e);return t&&(ie=n),n},We=function(e){return e||(e=r.currItem),e.initialZoomLevel},Ke=function(e){return e||(e=r.currItem),e.w>0?l.maxSpreadZoom:1},qe=function(e,t,n,i){return i===r.currItem.initialZoomLevel?(n[e]=r.currItem.initialPosition[e],!0):(n[e]=Le(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},Ye=function(){if(O){var t=N.perspective&&!B;return b="translate"+(t?"3d(":"("),void(C=N.perspective?", 0px)":")")}O="left",o.addClass(e,"pswp--ie"),Me=function(e,t){t.left=e+"px"},Pe=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,i=t*e.w,o=t*e.h;n.width=i+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Se=function(){if(oe){var e=oe,t=r.currItem,n=t.fitRatio>1?1:t.fitRatio,i=n*t.w,o=n*t.h;e.width=i+"px",e.height=o+"px",e.left=me.x+"px",e.top=me.y+"px"}}},Ve=function(e){var t="";l.escKey&&27===e.keyCode?t="close":l.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,r[t]()))},Xe=function(e){e&&(X||V||re||W)&&(e.preventDefault(),e.stopPropagation())},Je=function(){r.setScrollOffset(0,o.getScrollY())},$e={},Qe=0,et=function(e){$e[e]&&($e[e].raf&&P($e[e].raf),Qe--,delete $e[e])},tt=function(e){$e[e]&&et(e),$e[e]||(Qe++,$e[e]={})},nt=function(){for(var e in $e)$e.hasOwnProperty(e)&&et(e)},it=function(e,t,n,i,o,r,u){var a,l=Oe();tt(e);var s=function(){if($e[e]){if(a=Oe()-l,a>=i)return et(e),r(n),void(u&&u());r((n-t)*o(a/i)+t),$e[e].raf=S(s)}};s()},ot={shout:Ie,listen:Te,viewportSize:ge,options:l,isMainScrollAnimating:function(){return re},getZoomLevel:function(){return E},getCurrentIndex:function(){return p},isDragging:function(){return q},isZooming:function(){return ee},setScrollOffset:function(e,t){Ee.x=e,U=Ee.y=t,Ie("updateScrollOffset",Ee)},applyZoomPan:function(e,t,n,i){me.x=t,me.y=n,E=e,Se(i)},init:function(){if(!s&&!c){var n;r.framework=o,r.template=e,r.bg=o.getChildByClass(e,"pswp__bg"),M=e.className,s=!0,N=o.detectFeatures(),S=N.raf,P=N.caf,O=N.transform,L=N.oldIE,r.scrollWrap=o.getChildByClass(e,"pswp__scroll-wrap"),r.container=o.getChildByClass(r.scrollWrap,"pswp__container"),h=r.container.style,r.itemHolders=F=[{el:r.container.children[0],wrap:0,index:-1},{el:r.container.children[1],wrap:0,index:-1},{el:r.container.children[2],wrap:0,index:-1}],F[0].el.style.display=F[2].el.style.display="none",Ye(),y={resize:r.updateSize,orientationchange:function(){clearTimeout(z),z=setTimeout(function(){ge.x!==r.scrollWrap.clientWidth&&r.updateSize()},500)},scroll:Je,keydown:Ve,click:Xe};var i=N.isOldIOSPhone||N.isOldAndroid||N.isMobileOpera;for(N.animationName&&N.transform&&!i||(l.showAnimationDuration=l.hideAnimationDuration=0),n=0;n<we.length;n++)r["init"+we[n]]();if(t){var u=r.ui=new t(r,o);u.init()}Ie("firstUpdate"),p=p||l.index||0,(isNaN(p)||p<0||p>=en())&&(p=0),r.currItem=Qt(p),(N.isOldIOSPhone||N.isOldAndroid)&&(Ce=!1),e.setAttribute("aria-hidden","false"),l.modal&&(Ce?e.style.position="fixed":(e.style.position="absolute",e.style.top=o.getScrollY()+"px")),void 0===U&&(Ie("initialLayout"),U=R=o.getScrollY());var d="pswp--open ";for(l.mainClass&&(d+=l.mainClass+" "),l.showHideOpacity&&(d+="pswp--animate_opacity "),d+=B?"pswp--touch":"pswp--notouch",d+=N.animationName?" pswp--css_animation":"",d+=N.svg?" pswp--svg":"",o.addClass(e,d),r.updateSize(),f=-1,be=null,n=0;n<a;n++)Me((n+f)*ve.x,F[n].el.style);L||o.bind(r.scrollWrap,g,r),Te("initialZoomInEnd",function(){r.setContent(F[0],p-1),r.setContent(F[2],p+1),F[0].el.style.display=F[2].el.style.display="block",l.focus&&e.focus(),je()}),r.setContent(F[1],p),r.updateCurrItem(),Ie("afterInit"),Ce||(w=setInterval(function(){Qe||q||ee||E!==r.currItem.initialZoomLevel||r.updateSize()},1e3)),o.addClass(e,"pswp--visible")}},close:function(){s&&(s=!1,c=!0,Ie("close"),He(),nn(r.currItem,null,!0,r.destroy))},destroy:function(){Ie("destroy"),Vt&&clearTimeout(Vt),e.setAttribute("aria-hidden","true"),e.className=M,w&&clearInterval(w),o.unbind(r.scrollWrap,g,r),o.unbind(window,"scroll",r),At(),nt(),_e=null},panTo:function(e,t,n){n||(e>ie.min.x?e=ie.min.x:e<ie.max.x&&(e=ie.max.x),t>ie.min.y?t=ie.min.y:t<ie.max.y&&(t=ie.max.y)),me.x=e,me.y=t,Se()},handleEvent:function(e){e=e||window.event,y[e.type]&&y[e.type](e)},goTo:function(e){e=De(e);var t=e-p;be=t,p=e,r.currItem=Qt(p),ye-=t,Re(ve.x*ye),nt(),re=!1,r.updateCurrItem()},next:function(){r.goTo(p+1)},prev:function(){r.goTo(p-1)},updateCurrZoomItem:function(e){if(e&&Ie("beforeChange",0),F[1].el.children.length){var t=F[1].el.children[0];oe=o.hasClass(t,"pswp__zoom-wrap")?t.style:null}else oe=null;ie=r.currItem.bounds,v=E=r.currItem.initialZoomLevel,me.x=ie.center.x,me.y=ie.center.y,e&&Ie("afterChange")},invalidateCurrItems:function(){x=!0;for(var e=0;e<a;e++)F[e].item&&(F[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==be){var t,n=Math.abs(be);if(!(e&&n<2)){r.currItem=Qt(p),Fe=!1,Ie("beforeChange",be),n>=a&&(f+=be+(be>0?-a:a),n=a);for(var i=0;i<n;i++)be>0?(t=F.shift(),F[a-1]=t,f++,Me((f+2)*ve.x,t.el.style),r.setContent(t,p-n+i+1+1)):(t=F.pop(),F.unshift(t),f--,Me(f*ve.x,t.el.style),r.setContent(t,p+n-i-1-1));if(oe&&1===Math.abs(be)){var o=Qt(A);o.initialZoomLevel!==E&&(sn(o,ge),hn(o),Pe(o))}be=0,r.updateCurrZoomItem(),A=p,Ie("afterChange")}}},updateSize:function(t){if(!Ce&&l.modal){var n=o.getScrollY();if(U!==n&&(e.style.top=n+"px",U=n),!t&&xe.x===window.innerWidth&&xe.y===window.innerHeight)return;xe.x=window.innerWidth,xe.y=window.innerHeight,e.style.height=xe.y+"px"}if(ge.x=r.scrollWrap.clientWidth,ge.y=r.scrollWrap.clientHeight,Je(),ve.x=ge.x+Math.round(ge.x*l.spacing),ve.y=ge.y,Re(ve.x*ye),Ie("beforeResize"),void 0!==f){for(var i,u,s,c=0;c<a;c++)i=F[c],Me((c+f)*ve.x,i.el.style),s=p+c-1,l.loop&&en()>2&&(s=De(s)),u=Qt(s),u&&(x||u.needsUpdate||!u.bounds)?(r.cleanSlide(u),r.setContent(i,s),1===c&&(r.currItem=u,r.updateCurrZoomItem(!0)),u.needsUpdate=!1):i.index===-1&&s>=0&&r.setContent(i,s),u&&u.container&&(sn(u,ge),hn(u),Pe(u));x=!1}v=E=r.currItem.initialZoomLevel,ie=r.currItem.bounds,ie&&(me.x=ie.center.x,me.y=ie.center.y,Se(!0)),Ie("resize")},zoomTo:function(e,t,n,i,r){t&&(v=E,bt.x=Math.abs(t.x)-me.x,bt.y=Math.abs(t.y)-me.y,Ue(fe,me));var u=Ge(e,!1),a={};qe("x",u,a,e),qe("y",u,a,e);var l=E,s={x:me.x,y:me.y};Ne(a);var c=function(t){1===t?(E=e,me.x=a.x,me.y=a.y):(E=(e-l)*t+l,me.x=(a.x-s.x)*t+s.x,me.y=(a.y-s.y)*t+s.y),r&&r(t),Se(1===t)};n?it("customZoomTo",0,1,n,i||o.easing.sine.inOut,c):c(1)}},rt=30,ut=10,at={},lt={},st={},ct={},dt={},pt=[],ht={},ft=[],mt={},gt=0,yt=pe(),Et=0,vt=pe(),bt=pe(),Ct=pe(),wt=function(e,t){return e.x===t.x&&e.y===t.y},xt=function(e,t){return Math.abs(e.x-t.x)<u&&Math.abs(e.y-t.y)<u},Ft=function(e,t){return mt.x=Math.abs(e.x-t.x),mt.y=Math.abs(e.y-t.y),Math.sqrt(mt.x*mt.x+mt.y*mt.y)},At=function(){J&&(P(J),J=null)},Dt=function(){q&&(J=S(Dt),jt())},_t=function(){return!("fit"===l.scaleMode&&E===r.currItem.initialZoomLevel)},Tt=function(e,t){return!(!e||e===document)&&(!(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(t(e)?e:Tt(e.parentNode,t)))},It={},Ot=function(e,t){return It.prevent=!Tt(e.target,l.isClickableElement),Ie("preventDragEvent",e,t,It),It.prevent},kt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Bt=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},St=function(e,t,n){if(e-j>50){var i=ft.length>2?ft.shift():{};i.x=t,i.y=n,ft.push(i),j=e}},Pt=function(){var e=me.y-r.currItem.initialPosition.y;return 1-Math.abs(e/(ge.y/2))},Mt={},Rt={},Lt=[],Ut=function(e){for(;Lt.length>0;)Lt.pop();return k?(de=0,pt.forEach(function(e){0===de?Lt[0]=e:1===de&&(Lt[1]=e),de++})):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(Lt[0]=kt(e.touches[0],Mt),e.touches.length>1&&(Lt[1]=kt(e.touches[1],Rt))):(Mt.x=e.pageX,Mt.y=e.pageY,Mt.id="",Lt[0]=Mt),Lt},Nt=function(e,t){var n,i,o,u,a=0,s=me[e]+t[e],c=t[e]>0,d=vt.x+t.x,p=vt.x-ht.x;return n=s>ie.min[e]||s<ie.max[e]?l.panEndFriction:1,s=me[e]+t[e]*n,!l.allowPanToNext&&E!==r.currItem.initialZoomLevel||(oe?"h"!==ue||"x"!==e||V||(c?(s>ie.min[e]&&(n=l.panEndFriction,a=ie.min[e]-s,i=ie.min[e]-fe[e]),(i<=0||p<0)&&en()>1?(u=d,p<0&&d>ht.x&&(u=ht.x)):ie.min.x!==ie.max.x&&(o=s)):(s<ie.max[e]&&(n=l.panEndFriction,a=s-ie.max[e],i=fe[e]-ie.max[e]),(i<=0||p>0)&&en()>1?(u=d,p>0&&d<ht.x&&(u=ht.x)):ie.min.x!==ie.max.x&&(o=s))):u=d,"x"!==e)?void(re||$||E>r.currItem.fitRatio&&(me[e]+=t[e]*n)):(void 0!==u&&(Re(u,!0),$=u!==ht.x),ie.min.x!==ie.max.x&&(void 0!==o?me.x=o:$||(me.x+=t.x*n)),void 0!==u)},zt=function(e){if(!("mousedown"===e.type&&e.button>0)){if($t)return void e.preventDefault();if(!K||"mousedown"!==e.type){if(Ot(e,!0)&&e.preventDefault(),Ie("pointerDown"),k){var t=o.arraySearch(pt,e.pointerId,"id");t<0&&(t=pt.length),pt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Ut(e),i=n.length;Q=null,nt(),q&&1!==i||(q=ae=!0,o.bind(window,m,r),G=ce=le=W=$=X=Y=V=!1,ue=null,Ie("firstTouchStart",n),Ue(fe,me),he.x=he.y=0,Ue(ct,n[0]),Ue(dt,ct),ht.x=ve.x*ye,ft=[{x:ct.x,y:ct.y}],j=Z=Oe(),Ge(E,!0),At(),Dt()),!ee&&i>1&&!re&&!$&&(v=E,V=!1,ee=Y=!0,he.y=he.x=0,Ue(fe,me),Ue(at,n[0]),Ue(lt,n[1]),Bt(at,lt,Ct),bt.x=Math.abs(Ct.x)-me.x,bt.y=Math.abs(Ct.y)-me.y,te=ne=Ft(at,lt))}}},Zt=function(e){if(e.preventDefault(),k){var t=o.arraySearch(pt,e.pointerId,"id");if(t>-1){var n=pt[t];n.x=e.pageX,n.y=e.pageY}}if(q){var i=Ut(e);if(ue||X||ee)Q=i;else if(vt.x!==ve.x*ye)ue="h";else{var r=Math.abs(i[0].x-ct.x)-Math.abs(i[0].y-ct.y);Math.abs(r)>=ut&&(ue=r>0?"h":"v",Q=i)}}},jt=function(){if(Q){var e=Q.length;if(0!==e)if(Ue(at,Q[0]),st.x=at.x-ct.x,st.y=at.y-ct.y,ee&&e>1){if(ct.x=at.x,ct.y=at.y,!st.x&&!st.y&&wt(Q[1],lt))return;Ue(lt,Q[1]),V||(V=!0,Ie("zoomGestureStarted"));var t=Ft(at,lt),n=qt(t);n>r.currItem.initialZoomLevel+r.currItem.initialZoomLevel/15&&(ce=!0);var i=1,o=We(),u=Ke();if(n<o)if(l.pinchToClose&&!ce&&v<=r.currItem.initialZoomLevel){var a=o-n,s=1-a/(o/1.2);ke(s),Ie("onPinchClose",s),le=!0}else i=(o-n)/o,i>1&&(i=1),n=o-i*(o/3);else n>u&&(i=(n-u)/(6*o),i>1&&(i=1),n=u+i*o);i<0&&(i=0),te=t,Bt(at,lt,yt),he.x+=yt.x-Ct.x,he.y+=yt.y-Ct.y,Ue(Ct,yt),me.x=Le("x",n),me.y=Le("y",n),G=n>E,E=n,Se()}else{if(!ue)return;if(ae&&(ae=!1,Math.abs(st.x)>=ut&&(st.x-=Q[0].x-dt.x),Math.abs(st.y)>=ut&&(st.y-=Q[0].y-dt.y)),ct.x=at.x,ct.y=at.y,0===st.x&&0===st.y)return;if("v"===ue&&l.closeOnVerticalDrag&&!_t()){he.y+=st.y,me.y+=st.y;var c=Pt();return W=!0,Ie("onVerticalDrag",c),ke(c),void Se()}St(Oe(),at.x,at.y),X=!0,ie=r.currItem.bounds;var d=Nt("x",st);d||(Nt("y",st),Ne(me),Se())}}},Ht=function(e){if(N.isOldAndroid){if(K&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(K),K=setTimeout(function(){K=0},600))}Ie("pointerUp"),Ot(e,!1)&&e.preventDefault();var t;if(k){var n=o.arraySearch(pt,e.pointerId,"id");if(n>-1)if(t=pt.splice(n,1)[0],navigator.pointerEnabled)t.type=e.pointerType||"mouse";else{var i={4:"mouse",2:"touch",3:"pen"};t.type=i[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}}var u,a=Ut(e),s=a.length;if("mouseup"===e.type&&(s=0),2===s)return Q=null,!0;1===s&&Ue(dt,a[0]),0!==s||ue||re||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Ie("touchRelease",e,t));var c=-1;if(0===s&&(q=!1,o.unbind(window,m,r),At(),ee?c=0:Et!==-1&&(c=Oe()-Et)),Et=1===s?Oe():-1,u=c!==-1&&c<150?"zoom":"swipe",ee&&s<2&&(ee=!1,1===s&&(u="zoomPointerUp"),Ie("zoomGestureEnded")),Q=null,X||V||re||W)if(nt(),H||(H=Gt()),H.calculateSwipeSpeed("x"),W){var d=Pt();if(d<l.verticalDragRange)r.close();else{var p=me.y,h=se;it("verticalDrag",0,1,300,o.easing.cubic.out,function(e){me.y=(r.currItem.initialPosition.y-p)*e+p,ke((1-h)*e+h),Se()}),Ie("onVerticalDrag",1)}}else{if(($||re)&&0===s){var f=Kt(u,H);if(f)return;u="zoomPointerUp"}if(!re)return"swipe"!==u?void Yt():void(!$&&E>r.currItem.fitRatio&&Wt(H))}},Gt=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(i){ft.length>1?(e=Oe()-j+50,t=ft[ft.length-2][i]):(e=Oe()-Z,t=dt[i]),n.lastFlickOffset[i]=ct[i]-t,n.lastFlickDist[i]=Math.abs(n.lastFlickOffset[i]),n.lastFlickDist[i]>20?n.lastFlickSpeed[i]=n.lastFlickOffset[i]/e:n.lastFlickSpeed[i]=0,Math.abs(n.lastFlickSpeed[i])<.1&&(n.lastFlickSpeed[i]=0),n.slowDownRatio[i]=.95,n.slowDownRatioReverse[i]=1-n.slowDownRatio[i],n.speedDecelerationRatio[i]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(me[e]>ie.min[e]?n.backAnimDestination[e]=ie.min[e]:me[e]<ie.max[e]&&(n.backAnimDestination[e]=ie.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,it("bounceZoomPan"+e,me[e],n.backAnimDestination[e],t||300,o.easing.sine.out,function(t){me[e]=t,Se()}))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,me[e]+=n.distanceOffset[e])},panAnimLoop:function(){if($e.zoomPan&&($e.zoomPan.raf=S(n.panAnimLoop),n.now=Oe(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Se(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return me.x=Math.round(me.x),me.y=Math.round(me.y),Se(),void et("zoomPan")}};return n},Wt=function(e){return e.calculateSwipeSpeed("y"),ie=r.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(tt("zoomPan"),e.lastNow=Oe(),void e.panAnimLoop())},Kt=function(e,t){var n;re||(gt=p);var i;if("swipe"===e){var u=ct.x-dt.x,a=t.lastFlickDist.x<10;u>rt&&(a||t.lastFlickOffset.x>20)?i=-1:u<-rt&&(a||t.lastFlickOffset.x<-20)&&(i=1)}var s;i&&(p+=i,p<0?(p=l.loop?en()-1:0,s=!0):p>=en()&&(p=l.loop?0:en()-1,s=!0),s&&!l.loop||(be+=i,ye-=i,n=!0));var c,d=ve.x*ye,h=Math.abs(d-vt.x);return n||d>vt.x==t.lastFlickSpeed.x>0?(c=Math.abs(t.lastFlickSpeed.x)>0?h/Math.abs(t.lastFlickSpeed.x):333,c=Math.min(c,400),c=Math.max(c,250)):c=333,gt===p&&(n=!1),re=!0,Ie("mainScrollAnimStart"),it("mainScroll",vt.x,d,c,o.easing.cubic.out,Re,function(){
nt(),re=!1,gt=-1,(n||gt!==p)&&r.updateCurrItem(),Ie("mainScrollAnimComplete")}),n&&r.updateCurrItem(!0),n},qt=function(e){return 1/ne*e*v},Yt=function(){var e=E,t=We(),n=Ke();E<t?e=t:E>n&&(e=n);var i,u=1,a=se;return le&&!G&&!ce&&E<t?(r.close(),!0):(le&&(i=function(e){ke((u-a)*e+a)}),r.zoomTo(e,0,200,o.easing.cubic.out,i),!0)};Ae("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,i,o){D=e+t,_=e+n,T=e+i,I=o?e+o:""};k=N.pointerEvent,k&&N.touch&&(N.touch=!1),k?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):N.touch?(e("touch","start","move","end","cancel"),B=!0):e("mouse","down","move","up"),m=_+" "+T+" "+I,g=D,k&&!B&&(B=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),r.likelyTouchDevice=B,y[D]=zt,y[_]=Zt,y[T]=Ht,I&&(y[I]=y[T]),N.touch&&(g+=" mousedown",m+=" mousemove mouseup",y.mousedown=y[D],y.mousemove=y[_],y.mouseup=y[T]),B||(l.allowPanToNext=!1)}}});var Vt,Xt,Jt,$t,Qt,en,tn,nn=function(t,n,i,u){Vt&&clearTimeout(Vt),$t=!0,Jt=!0;var a;t.initialLayout?(a=t.initialLayout,t.initialLayout=null):a=l.getThumbBoundsFn&&l.getThumbBoundsFn(p);var s=i?l.hideAnimationDuration:l.showAnimationDuration,c=function(){et("initialZoom"),i?(r.template.removeAttribute("style"),r.bg.removeAttribute("style")):(ke(1),n&&(n.style.display="block"),o.addClass(e,"pswp--animated-in"),Ie("initialZoom"+(i?"OutEnd":"InEnd"))),u&&u(),$t=!1};if(!s||!a||void 0===a.x)return Ie("initialZoom"+(i?"Out":"In")),E=t.initialZoomLevel,Ue(me,t.initialPosition),Se(),e.style.opacity=i?0:1,ke(1),void(s?setTimeout(function(){c()},s):c());var h=function(){var n=d,u=!r.currItem.src||r.currItem.loadError||l.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),i||(E=a.w/t.w,me.x=a.x,me.y=a.y-R,r[u?"template":"bg"].style.opacity=.001,Se()),tt("initialZoom"),i&&!n&&o.removeClass(e,"pswp--animated-in"),u&&(i?o[(n?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout(function(){o.addClass(e,"pswp--animate_opacity")},30)),Vt=setTimeout(function(){if(Ie("initialZoom"+(i?"Out":"In")),i){var r=a.w/t.w,l={x:me.x,y:me.y},d=E,p=se,h=function(t){1===t?(E=r,me.x=a.x,me.y=a.y-U):(E=(r-d)*t+d,me.x=(a.x-l.x)*t+l.x,me.y=(a.y-U-l.y)*t+l.y),Se(),u?e.style.opacity=1-t:ke(p-t*p)};n?it("initialZoom",0,1,s,o.easing.cubic.out,h,c):(h(1),Vt=setTimeout(c,s+20))}else E=t.initialZoomLevel,Ue(me,t.initialPosition),Se(),ke(1),u?e.style.opacity=1:ke(1),Vt=setTimeout(c,s+20)},i?25:90)};h()},on={},rn=[],un={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Xt.length}},an=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},ln=function(e,t,n){var i=e.bounds;i.center.x=Math.round((on.x-t)/2),i.center.y=Math.round((on.y-n)/2)+e.vGap.top,i.max.x=t>on.x?Math.round(on.x-t):i.center.x,i.max.y=n>on.y?Math.round(on.y-n)+e.vGap.top:i.center.y,i.min.x=t>on.x?0:i.center.x,i.min.y=n>on.y?e.vGap.top:i.center.y},sn=function(e,t,n){if(e.src&&!e.loadError){var i=!n;if(i&&(e.vGap||(e.vGap={top:0,bottom:0}),Ie("parseVerticalMargin",e)),on.x=t.x,on.y=t.y-e.vGap.top-e.vGap.bottom,i){var o=on.x/e.w,r=on.y/e.h;e.fitRatio=o<r?o:r;var u=l.scaleMode;"orig"===u?n=1:"fit"===u&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=an())}if(!n)return;return ln(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=an(),e.initialPosition=e.bounds.center,e.bounds},cn=function(e,t,n,i,o,u){t.loadError||i&&(t.imageAppended=!0,hn(t,i,t===r.currItem&&Fe),n.appendChild(i),u&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},dn=function(e){e.loading=!0,e.loaded=!1;var t=e.img=o.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},pn=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=l.errorMsg.replace("%url%",e.src),!0},hn=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var i=n?e.w:Math.round(e.w*e.fitRatio),o=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=o+"px"),t.style.width=i+"px",t.style.height=o+"px"}},fn=function(){if(rn.length){for(var e,t=0;t<rn.length;t++)e=rn[t],e.holder.index===e.index&&cn(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);rn=[]}};Ae("Controller",{publicMethods:{lazyLoadItem:function(e){e=De(e);var t=Qt(e);t&&(!t.loaded&&!t.loading||x)&&(Ie("gettingData",e,t),t.src&&dn(t))},initController:function(){o.extend(l,un,!0),r.items=Xt=n,Qt=r.getItemAt,en=l.getNumItemsFn,tn=l.loop,en()<3&&(l.loop=!1),Te("beforeChange",function(e){var t,n=l.preload,i=null===e||e>=0,o=Math.min(n[0],en()),u=Math.min(n[1],en());for(t=1;t<=(i?u:o);t++)r.lazyLoadItem(p+t);for(t=1;t<=(i?o:u);t++)r.lazyLoadItem(p-t)}),Te("initialLayout",function(){r.currItem.initialLayout=l.getThumbBoundsFn&&l.getThumbBoundsFn(p)}),Te("mainScrollAnimComplete",fn),Te("initialZoomInEnd",fn),Te("destroy",function(){for(var e,t=0;t<Xt.length;t++)e=Xt[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);rn=null})},getItemAt:function(e){return e>=0&&(void 0!==Xt[e]&&Xt[e])},allowProgressiveImg:function(){return l.forceProgressiveLoading||!B||l.mouseUsed||screen.width>1200},setContent:function(e,t){l.loop&&(t=De(t));var n=r.getItemAt(e.index);n&&(n.container=null);var i,u=r.getItemAt(t);if(!u)return void(e.el.innerHTML="");Ie("gettingData",t,u),e.index=t,e.item=u;var a=u.container=o.createEl("pswp__zoom-wrap");if(!u.src&&u.html&&(u.html.tagName?a.appendChild(u.html):a.innerHTML=u.html),pn(u),sn(u,ge),!u.src||u.loadError||u.loaded)u.src&&!u.loadError&&(i=o.createEl("pswp__img","img"),i.style.opacity=1,i.src=u.src,hn(u,i),cn(t,u,a,i,!0));else{if(u.loadComplete=function(n){if(s){if(e&&e.index===t){if(pn(n,!0))return n.loadComplete=n.img=null,sn(n,ge),Pe(n),void(e.index===p&&r.updateCurrZoomItem());n.imageAppended?!$t&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):N.transform&&(re||$t)?rn.push({item:n,baseDiv:a,img:n.img,index:t,holder:e,clearPlaceholder:!0}):cn(t,n,a,n.img,re||$t,!0)}n.loadComplete=null,n.img=null,Ie("imageLoadComplete",t,n)}},o.features.transform){var c="pswp__img pswp__img--placeholder";c+=u.msrc?"":" pswp__img--placeholder--blank";var d=o.createEl(c,u.msrc?"img":"");u.msrc&&(d.src=u.msrc),hn(u,d),a.appendChild(d),u.placeholder=d}u.loading||dn(u),r.allowProgressiveImg()&&(!Jt&&N.transform?rn.push({item:u,baseDiv:a,img:u.img,index:t,holder:e}):cn(t,u,a,u.img,!0,!0))}Jt||t!==p?Pe(u):(oe=a.style,nn(u,i||u.img)),e.el.innerHTML="",e.el.appendChild(a)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var mn,gn={},yn=function(e,t,n){var i=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(i)};Ae("Tap",{publicMethods:{initTap:function(){Te("firstTouchStart",r.onTapStart),Te("touchRelease",r.onTapRelease),Te("destroy",function(){gn={},mn=null})},onTapStart:function(e){e.length>1&&(clearTimeout(mn),mn=null)},onTapRelease:function(e,t){if(t&&!X&&!Y&&!Qe){var n=t;if(mn&&(clearTimeout(mn),mn=null,xt(n,gn)))return void Ie("doubleTap",n);if("mouse"===t.type)return void yn(e,t,"mouse");var i=e.target.tagName.toUpperCase();if("BUTTON"===i||o.hasClass(e.target,"pswp__single-tap"))return void yn(e,t);Ue(gn,n),mn=setTimeout(function(){yn(e,t),mn=null},300)}}}});var En;Ae("DesktopZoom",{publicMethods:{initDesktopZoom:function(){L||(B?Te("mouseUsed",function(){r.setupDesktopZoom()}):r.setupDesktopZoom(!0))},setupDesktopZoom:function(t){En={};var n="wheel mousewheel DOMMouseScroll";Te("bindEvents",function(){o.bind(e,n,r.handleMouseWheel)}),Te("unbindEvents",function(){En&&o.unbind(e,n,r.handleMouseWheel)}),r.mouseZoomedIn=!1;var i,u=function(){r.mouseZoomedIn&&(o.removeClass(e,"pswp--zoomed-in"),r.mouseZoomedIn=!1),E<1?o.addClass(e,"pswp--zoom-allowed"):o.removeClass(e,"pswp--zoom-allowed"),a()},a=function(){i&&(o.removeClass(e,"pswp--dragging"),i=!1)};Te("resize",u),Te("afterChange",u),Te("pointerDown",function(){r.mouseZoomedIn&&(i=!0,o.addClass(e,"pswp--dragging"))}),Te("pointerUp",a),t||u()},handleMouseWheel:function(e){if(E<=r.currItem.fitRatio)return l.modal&&(!l.closeOnScroll||Qe||q?e.preventDefault():O&&Math.abs(e.deltaY)>2&&(d=!0,r.close())),!0;if(e.stopPropagation(),En.x=0,"deltaX"in e)1===e.deltaMode?(En.x=18*e.deltaX,En.y=18*e.deltaY):(En.x=e.deltaX,En.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(En.x=-.16*e.wheelDeltaX),e.wheelDeltaY?En.y=-.16*e.wheelDeltaY:En.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;En.y=e.detail}Ge(E,!0);var t=me.x-En.x,n=me.y-En.y;(l.modal||t<=ie.min.x&&t>=ie.max.x&&n<=ie.min.y&&n>=ie.max.y)&&e.preventDefault(),r.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:ge.x/2+Ee.x,y:ge.y/2+Ee.y};var n=l.getDoubleTapZoom(!0,r.currItem),i=E===n;r.mouseZoomedIn=!i,r.zoomTo(i?r.currItem.initialZoomLevel:n,t,333),o[(i?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var vn,bn,Cn,wn,xn,Fn,An,Dn,_n,Tn,In,On,kn={history:!0,galleryUID:1},Bn=function(){return In.hash.substring(1)},Sn=function(){vn&&clearTimeout(vn),Cn&&clearTimeout(Cn)},Pn=function(){var e=Bn(),t={};if(e.length<5)return t;var n,i=e.split("&");for(n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");o.length<2||(t[o[0]]=o[1])}if(l.galleryPIDs){var r=t.pid;for(t.pid=0,n=0;n<Xt.length;n++)if(Xt[n].pid===r){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},Mn=function(){if(Cn&&clearTimeout(Cn),Qe||q)return void(Cn=setTimeout(Mn,500));wn?clearTimeout(bn):wn=!0;var e=p+1,t=Qt(p);t.hasOwnProperty("pid")&&(e=t.pid);var n=An+"&gid="+l.galleryUID+"&pid="+e;Dn||In.hash.indexOf(n)===-1&&(Tn=!0);var i=In.href.split("#")[0]+"#"+n;On?"#"+n!==window.location.hash&&history[Dn?"replaceState":"pushState"]("",document.title,i):Dn?In.replace(i):In.hash=n,Dn=!0,bn=setTimeout(function(){wn=!1},60)};Ae("History",{publicMethods:{initHistory:function(){if(o.extend(l,kn,!0),l.history){In=window.location,Tn=!1,_n=!1,Dn=!1,An=Bn(),On="pushState"in history,An.indexOf("gid=")>-1&&(An=An.split("&gid=")[0],An=An.split("?gid=")[0]),Te("afterChange",r.updateURL),Te("unbindEvents",function(){o.unbind(window,"hashchange",r.onHashChange)});var e=function(){Fn=!0,_n||(Tn?history.back():An?In.hash=An:On?history.pushState("",document.title,In.pathname+In.search):In.hash=""),Sn()};Te("unbindEvents",function(){d&&e()}),Te("destroy",function(){Fn||e()}),Te("firstUpdate",function(){p=Pn().pid});var t=An.indexOf("pid=");t>-1&&(An=An.substring(0,t),"&"===An.slice(-1)&&(An=An.slice(0,-1))),setTimeout(function(){s&&o.bind(window,"hashchange",r.onHashChange)},40)}},onHashChange:function(){return Bn()===An?(_n=!0,void r.close()):void(wn||(xn=!0,r.goTo(Pn().pid),xn=!1))},updateURL:function(){Sn(),xn||(Dn?vn=setTimeout(Mn,800):Mn())}}}),o.extend(r,ot)};return e})},{}]},{},["/Users/sam/sites/natural-gallery.lan/cache/build.js"]);
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("photoswipe"),require("photoswipe/dist/photoswipe-ui-default")):"function"==typeof define&&define.amd?define("NaturalGallery",["photoswipe","photoswipe/dist/photoswipe-ui-default"],e):"object"==typeof exports?exports.NaturalGallery=e(require("photoswipe"),require("photoswipe/dist/photoswipe-ui-default")):t.NaturalGallery=e(t.PhotoSwipe,t.PhotoSwipeUI_Default)}(window,function(t,e){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=26)}([function(t,e,n){"use strict";e.a=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";var o=Array.isArray;e.a=o},function(t,e,n){"use strict";var o=n(3).a.Symbol;e.a=o},function(t,e,n){"use strict";var o=n(13),i="object"==typeof self&&self&&self.Object===Object&&self,r=o.a||i||Function("return this")();e.a=r},function(t,e,n){"use strict";var o=n(8),i=n(5),r="[object Symbol]";e.a=function(t){return"symbol"==typeof t||Object(i.a)(t)&&Object(o.a)(t)==r}},function(t,e,n){"use strict";e.a=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";var o=9007199254740991,i=/^(?:0|[1-9]\d*)$/;e.a=function(t,e){var n=typeof t;return!!(e=null==e?o:e)&&("number"==n||"symbol"!=n&&i.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){"use strict";e.a=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){"use strict";var o=n(2),i=Object.prototype,r=i.hasOwnProperty,s=i.toString,l=o.a?o.a.toStringTag:void 0;var a=function(t){var e=r.call(t,l),n=t[l];try{t[l]=void 0;var o=!0}catch(t){}var i=s.call(t);return o&&(e?t[l]=n:delete t[l]),i},c=Object.prototype.toString;var u=function(t){return c.call(t)},h="[object Null]",p="[object Undefined]",f=o.a?o.a.toStringTag:void 0;e.a=function(t){return null==t?void 0===t?p:h:f&&f in Object(t)?a(t):u(t)}},function(t,e,n){"use strict";var o=9007199254740991;e.a=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}},function(t,e,n){"use strict";var o,i=n(14),r=n(3).a["__core-js_shared__"],s=(o=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";var l=function(t){return!!s&&s in t},a=n(0),c=Function.prototype.toString;var u=function(t){if(null!=t){try{return c.call(t)}catch(t){}try{return t+""}catch(t){}}return""},h=/^\[object .+?Constructor\]$/,p=Function.prototype,f=Object.prototype,d=p.toString,v=f.hasOwnProperty,g=RegExp("^"+d.call(v).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var m=function(t){return!(!Object(a.a)(t)||l(t))&&(Object(i.a)(t)?g:h).test(u(t))};var y=function(t,e){return null==t?void 0:t[e]};e.a=function(t,e){var n=y(t,e);return m(n)?n:void 0}},function(t,e,n){"use strict";var o=n(8),i=n(5),r="[object Arguments]";var s=function(t){return Object(i.a)(t)&&Object(o.a)(t)==r},l=Object.prototype,a=l.hasOwnProperty,c=l.propertyIsEnumerable,u=s(function(){return arguments}())?s:function(t){return Object(i.a)(t)&&a.call(t,"callee")&&!c.call(t,"callee")};e.a=u},function(t,e,n){"use strict";var o=n(10),i=function(){try{var t=Object(o.a)(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();e.a=i},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(29))},function(t,e,n){"use strict";var o=n(8),i=n(0),r="[object AsyncFunction]",s="[object Function]",l="[object GeneratorFunction]",a="[object Proxy]";e.a=function(t){if(!Object(i.a)(t))return!1;var e=Object(o.a)(t);return e==s||e==l||e==r||e==a}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";var o=function(t){return function(){return t}},i=n(12),r=n(15),s=i.a?function(t,e){return Object(i.a)(t,"toString",{configurable:!0,enumerable:!1,value:o(e),writable:!0})}:r.a,l=800,a=16,c=Date.now;var u=function(t){var e=0,n=0;return function(){var o=c(),i=a-(o-n);if(n=o,i>0){if(++e>=l)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(s);e.a=u},function(t,e,n){"use strict";var o=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},i=Math.max;e.a=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var r=arguments,s=-1,l=i(r.length-e,0),a=Array(l);++s<l;)a[s]=r[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=r[s];return c[e]=n(a),o(t,this,c)}}},function(t,e,n){"use strict";(function(t){var o=n(13),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,r=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=r&&r.exports===i&&o.a.process,l=function(){try{var t=r&&r.require&&r.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}();e.a=l}).call(this,n(22)(t))},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,o,i){var r=t.call(this,e,n,o,i)||this;if(r.elementRef=e,r.photoswipeElementRef=o,r.scrollElementRef=i,!n.rowHeight||n.rowHeight<=0)throw new Error("Option.rowHeight must be positive");return r}return i(e,t),e.prototype.addRows=function(e){this.completeLastRow(),t.prototype.addRows.call(this,e)},e.prototype.endResize=function(){t.prototype.endResize.call(this),this.completeLastRow(),this.flushBufferedItems()},e.prototype.completeLastRow=function(){var t=this;if(this.visibleCollection.length){var e=this.visibleCollection[this.visibleCollection.length-1].row,n=this.visibleCollection.filter(function(t){return t.row===e}).length,o=this.collection.slice(this.visibleCollection.length-n);this.organizeItems(o,o[0].row,o[0].row),o.slice(n).filter(function(t){return t.row<=o[0].row}).forEach(function(e){return t.addItemToDOM(e)})}},e}(n(20).AbstractRowGallery);e.AbstractResponsiveRowGallery=r},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onScroll=function(){this.addRows(1)},e.prototype.onPageAdd=function(){this.addRows(this.getRowsPerPage())},e.prototype.addRows=function(t){var e=this,n=this.visibleCollection.length,o=this.visibleCollection.length?this.visibleCollection[n-1].row+1:0,i=o+t-1,r=this.collection.slice(n);this.organizeItems(r,o,i),r.filter(function(t){return t.row<=i}).forEach(function(t){return e.addItemToDOM(t)}),this.flushBufferedItems(),this.updateNextButtonVisibility()},e.prototype.endResize=function(){t.prototype.endResize.call(this),this.visibleCollection.length&&this.organizeItems(this.visibleCollection)},e}(n(21).AbstractGallery);e.AbstractRowGallery=r},function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(39)),r=o(n(38)),s=o(n(37)),l=o(n(30)),a=o(n(31)),c=n(32),u=n(23),h=function(){function t(t,e,n,o){this.elementRef=t,this.photoswipeElementRef=n,this.scrollElementRef=o,this.options={gap:3,rowsPerPage:0,showLabels:"hover",lightbox:!1,minRowsAtStart:2,selectable:!1,activable:!1,infiniteScrollOffset:0,photoSwipeOptions:null,cover:!0},this.photoswipeDefaultOptions={bgOpacity:.85,showHideOpacity:!1},this.old_scroll_top=0,this._collection=[],this._visibleCollection=[],this.photoswipeCollection=[],this.scrollBufferedItems=[],this.requiredItems=0,this.options=r.default(e,this.options),console.log("this.options",this.options),this.options.lightbox&&!this.photoswipeElementRef&&console.error("Lightbox option is set to true, but no PhotoSwipe reference is given")}return t.prototype.init=function(){var t=this;this.elementRef.classList.add("natural-gallery-js"),this.flushBufferedItems=i.default(function(){t.scrollBufferedItems.forEach(function(e){e.loadImage(),t.dispatchEvent("item-displayed",e.model)}),t.scrollBufferedItems=[],t.requiredItems&&(t.dispatchEvent("pagination",{offset:t.collection.length,limit:t.requiredItems}),t.requiredItems=0)},500,{leading:!1,trailing:!0}),this.nextButton=document.createElement("div"),this.nextButton.classList.add("natural-gallery-next"),this.nextButton.appendChild(u.Utility.getIcon("natural-gallery-icon-next")),this.nextButton.style.display="none",this.nextButton.addEventListener("click",function(e){e.preventDefault(),t.onPageAdd()}),this.bodyElementRef=document.createElement("div"),this.bodyElementRef.classList.add("natural-gallery-body"),this.extendToFreeViewport();var e=document.createElement("iframe");this.elementRef.appendChild(e);var n=i.default(function(){return t.startResize()},500,{leading:!0,trailing:!1}),o=i.default(function(){return t.endResize()},500,{leading:!1,trailing:!0});e.contentWindow.addEventListener("resize",function(){o(),n()}),this.elementRef.appendChild(this.bodyElementRef),this.elementRef.appendChild(this.nextButton),this.requestItems(),this.options.rowsPerPage||this.bindScroll(null!==this.scrollElementRef?this.scrollElementRef:document)},t.prototype.requestItems=function(){var t=this.getEstimatedItemsPerRow()*(this.getRowsPerPage()+1);this.dispatchEvent("pagination",{offset:this.collection.length,limit:t})},t.prototype.getRowsPerPage=function(){if(this.options.rowsPerPage>0)return this.options.rowsPerPage;var t=this.getEstimatedRowsPerPage();return t<this.options.minRowsAtStart?this.options.minRowsAtStart:t},t.prototype.addItemToDOM=function(t,e){var n=this;void 0===e&&(e=this.bodyElementRef),this.visibleCollection.push(t),e.appendChild(t.init()),this.scrollBufferedItems.push(t),this.requiredItems++,this.dispatchEvent("item-added-to-dom",t.model),t.element.addEventListener("select",function(){n.dispatchEvent("select",n.visibleCollection.filter(function(t){return t.selected}).map(function(t){return t.model}))}),t.element.addEventListener("activate",function(t){n.dispatchEvent("activate",{model:t.detail.item.model,clickEvent:t.detail.clickEvent})}),t.element.addEventListener("zoom",function(t){n.openPhotoSwipe(t.detail)})},t.prototype.updateNextButtonVisibility=function(){this.visibleCollection.length===this.collection.length?this.nextButton.style.display="none":this.nextButton.style.display="block"},t.prototype.addItems=function(t){var e=this;if(t.constructor===Array&&t.length){var n=this.collection.length===this.visibleCollection.length;t.forEach(function(t){var n=s.default(e.options,["lightbox","selectable","activable","gap","showLabels","cover"]),o=new c.Item(n,t);e._collection.push(o),e.photoswipeCollection.push(e.getPhotoswipeItem(o))}),n&&this.onPageAdd()}},t.prototype.extendToFreeViewport=function(){if(this.options.rowsPerPage)return this.options.rowsPerPage;this.elementRef.style.minHeight=this.getGalleryVisibleHeight()+10+"px"},t.prototype.getGalleryVisibleHeight=function(){return document.documentElement.clientHeight-this.elementRef.offsetTop},t.prototype.startResize=function(){this.bodyElementRef.classList.add("resizing")},t.prototype.endResize=function(){this.bodyElementRef.classList.remove("resizing")},t.prototype.bindScroll=function(t){var e=this,n=t,o=null;o=t instanceof Document?t.documentElement:t;var r=i.default(function(){return e.elementRef.classList.add("scrolling")},300,{leading:!0,trailing:!1}),s=i.default(function(){return e.elementRef.classList.remove("scrolling")},300,{leading:!1,trailing:!0});n.addEventListener("scroll",function(){r(),s();var t=e.elementRef.offsetTop+e.elementRef.offsetHeight+e.options.infiniteScrollOffset,n=o.scrollTop-(o.clientTop||0),i=o.clientHeight,l=n-e.old_scroll_top;e.old_scroll_top=n,l>0&&n+i>=t&&e.onScroll()})},t.prototype.openPhotoSwipe=function(t){var e=this;if(!this.options.lightbox||this.photoswipeElementRef){var n={index:this.collection.findIndex(function(e){return e===t}),loop:!1};n=Object.assign({},this.photoswipeDefaultOptions,this.options.photoSwipeOptions,n);var o=new l.default(this.photoswipeElementRef,a.default,this.photoswipeCollection,n);o.init(),o.listen("beforeChange",function(t){1===t&&o.getCurrentIndex()===e.visibleCollection.length&&e.onPageAdd()}),this.dispatchEvent("zoom",{item:t.model,photoswipe:o})}else console.error("Lightbox option is set to true, but no PhotoSwipe reference is given")},t.prototype.getPhotoswipeItem=function(t){return{src:t.model.enlargedSrc,w:t.model.enlargedWidth,h:t.model.enlargedHeight,title:t.title}},t.prototype.dispatchEvent=function(t,e){var n=new CustomEvent(t,{detail:e});this.elementRef.dispatchEvent(n)},t.prototype.selectVisibleItems=function(){return this.visibleCollection.forEach(function(t){return t.select()}),this.selectedItems},t.prototype.unselectAllItems=function(){this.visibleCollection.forEach(function(t){return t.unselect()})},t.prototype.addEventListener=function(t,e){this.elementRef.addEventListener(t,e),"pagination"===t&&this.requestItems()},t.prototype.empty=function(){this.bodyElementRef.innerHTML="",this._visibleCollection=[],this.photoswipeCollection=[],this._collection=[]},t.prototype.clear=function(){this.empty(),this.requestItems()},t.prototype.setItems=function(t){this.empty(),this.addItems(t)},Object.defineProperty(t.prototype,"collection",{get:function(){return this._collection},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleCollection",{get:function(){return this._visibleCollection},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItems",{get:function(){return this.visibleCollection.filter(function(t){return t.selected}).map(function(t){return t.model})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.floor(this.bodyElementRef.getBoundingClientRect().width)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionLength",{get:function(){return this.collection.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleCollectionLength",{get:function(){return this.visibleCollection.length},enumerable:!0,configurable:!0}),t}();e.AbstractGallery=h},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.getIcon=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("viewBox","0 0 100 100"),e.innerHTML='<use xlink:href="#'+t+'"></use>',e}}(e.Utility||(e.Utility={}))},function(t,e,n){"use strict";(function(t){var o=n(3),i=n(25),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=r&&"object"==typeof t&&t&&!t.nodeType&&t,l=s&&s.exports===r?o.a.Buffer:void 0,a=(l?l.isBuffer:void 0)||i.a;e.a=a}).call(this,n(22)(t))},function(t,e,n){"use strict";e.a=function(){return!1}},function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),n(27),o(n(28)),o(n(33)),o(n(35)),o(n(36))},function(t,e,n){},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,o,i){var r=t.call(this,e,n,o,i)||this;return r.elementRef=e,r.photoswipeElementRef=o,r.scrollElementRef=i,r}return i(e,t),e.prototype.getEstimatedItemsPerRow=function(){return Math.ceil((this.width+this.options.gap)/(this.options.rowHeight+this.options.gap))},e.prototype.getEstimatedRowsPerPage=function(){return Math.ceil(this.getGalleryVisibleHeight()/(this.options.rowHeight+this.options.gap))+1},e.prototype.organizeItems=function(t,e,n,o){void 0===e&&(e=0),void 0===n&&(n=null),void 0===o&&(o=null),o||(o=e||0);for(var i=1;i<=t.length;i++){var r=t.slice(0,i);if(this.getRowWidth(this.options.rowHeight,this.options.gap,r)>=this.width){this.computeSizes(r,this.width,this.options.gap,o);var s=o+1;(null===n||s<=n)&&this.organizeItems(t.slice(i),e,n,s);break}if(i===t.length){this.computeSizes(r,null,this.options.gap,o,this.options.rowHeight);break}}},e.prototype.computeSizes=function(t,e,n,o,i){void 0===i&&(i=null);for(var r=e?this.getRowHeight(e,n,t):i,s=this.getRowWidth(r,n,t),l=e?this.apportionExcess(t,e,s):0,a=0,c=0;c<t.length;c++){var u=t[c],h=this.getImageRatio(u)*r-l;a+=h-Math.floor(h),h=Math.floor(h),(a>=1||c===t.length-1&&1===Math.round(a))&&(h++,a--),u.width=h,u.height=Math.floor(r),u.row=o,u.last=c===t.length-1,u.style()}},e.prototype.getRowWidth=function(t,e,n){return e*(n.length-1)+this.getRatios(n)*t},e.prototype.getRowHeight=function(t,e,n){return t/this.getRatios(n)+e*(n.length-1)},e.prototype.getRatios=function(t){for(var e=0,n=0;n<t.length;n++)e+=this.getImageRatio(t[n]);return e},e.prototype.getImageRatio=function(t){return Number(t.enlargedWidth)/Number(t.enlargedHeight)},e.prototype.apportionExcess=function(t,e,n){return(n-e)/t.length},e}(n(19).AbstractResponsiveRowGallery);e.Natural=r},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(23),i=function(){function t(t,e){this.options=t,this.model=e,this._selected=!1,this.title=this.getTitleDetails(e.title)}return t.prototype.getTitleDetails=function(t){return t.replace(/<(?!\s*br\s*\/?)[^>]+>/gi,"")},t.prototype.init=function(){var t=this,e=null;this.title&&["always","hover"].indexOf(this.options.showLabels)>-1&&(e=!0);var n=document.createElement("div"),i=document.createElement("div"),r=this.getLinkElement(),s=null,l=null;return this.options.lightbox&&e&&r?((e=r).classList.add("button"),s=i,l=r):this.options.lightbox&&e&&!r?(e=document.createElement("div"),this.options.activable?(l=e,e.classList.add("button"),s=i):s=n):this.options.lightbox&&!e?s=n:!this.options.lightbox&&e&&r?(i=this.getLinkElement(),(e=r).classList.add("button"),l=n):this.options.lightbox||!e||r?this.options.lightbox||e||!r||(i=r,l=r):(e=document.createElement("div"),this.options.activable&&(l=n,e.classList.add("button"))),s&&(s.classList.add("zoomable"),s.addEventListener("click",function(){var e=new CustomEvent("zoom",{detail:t});t._element.dispatchEvent(e)})),l&&(l.classList.add("activable"),l.addEventListener("click",function(e){var n=new CustomEvent("activate",{detail:{item:t,clickEvent:e}});t._element.dispatchEvent(n)})),this.options.cover&&i.classList.add("cover"),i.classList.add("image"),n.classList.add("figure"),n.appendChild(i),this.model.color&&(n.style.backgroundColor=this.model.color+"11"),this._element=n,this._image=i,e&&(e.innerHTML=this.title,e.classList.add("title"),"hover"===this.options.showLabels&&e.classList.add("hover"),n.appendChild(e)),this.options.selectable&&(this.model.selected&&this.select(),this._selectBtn=document.createElement("div"),this._selectBtn.appendChild(o.Utility.getIcon("natural-gallery-icon-select")),this._selectBtn.classList.add("selectBtn"),this._selectBtn.addEventListener("click",function(e){e.stopPropagation(),t.toggleSelect();var n=new CustomEvent("select",{detail:t});t._element.dispatchEvent(n)}),this._element.appendChild(this._selectBtn)),this.style(),n},t.prototype.style=function(){this._element&&(this._element.style.width=String(this.width+"px"),this._element.style.height=String(this.height+"px"),this._element.style.marginBottom=String(this.options.gap+"px"),this.last?this._element.style.marginRight="0":this._element.style.marginRight=String(this.options.gap+"px"))},t.prototype.loadImage=function(){var t=this,e=document.createElement("img");e.setAttribute("src",this.model.thumbnailSrc),this._image.style.backgroundImage="url("+this.model.thumbnailSrc+")",e.addEventListener("load",function(){t._element.classList.add("loaded")}),e.addEventListener("error",function(){t._element.classList.add("errored")})},t.prototype.toggleSelect=function(){this._selected?this.unselect():this.select()},t.prototype.select=function(){this._selected=!0,this._element.classList.add("selected")},t.prototype.unselect=function(){this._selected=!1,this._element.classList.remove("selected")},t.prototype.getLinkElement=function(){if(this.model.link){var t=document.createElement("a");return t.setAttribute("href",this.model.link),t.classList.add("link"),this.model.linkTarget&&t.setAttribute("target",this.model.linkTarget),t}return null},t.prototype.remove=function(){this._element.parentNode&&this._element.parentNode.removeChild(this._element)},Object.defineProperty(t.prototype,"last",{get:function(){return this._last},set:function(t){this._last=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"row",{get:function(){return this._row},set:function(t){this._row=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enlargedWidth",{get:function(){return this.model.enlargedWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enlargedHeight",{get:function(){return this.model.enlargedHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),t}();e.Item=i},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(34),s=function(t){function e(e,n,o,i){var r=t.call(this,e,n,o,i)||this;if(r.elementRef=e,r.photoswipeElementRef=o,r.scrollElementRef=i,!n.columnWidth||n.columnWidth<=0)throw new Error("Option.columnWidth must be positive");return r}return i(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.addColumns()},e.prototype.onScroll=function(){this.addUntilFill()},e.prototype.onPageAdd=function(){var t=this.addUntilFill(),e=this.getEstimatedItemsPerRow(),n=this.getEstimatedRowsPerPage()*e-t;n>0&&this.addItemsToDom(n)},e.prototype.getEstimatedItemsPerRow=function(){return Math.ceil((this.width-this.options.gap)/(this.options.columnWidth+this.options.gap))},e.prototype.getEstimatedRowsPerPage=function(){var t=this.getColumnWidth()/1.75;return Math.ceil(this.getGalleryVisibleHeight()/t)},e.prototype.addUntilFill=function(){var t=this.elementRef.clientHeight,e=0;do{e++,this.addItemsToDom(1)}while(this.elementRef.clientHeight===t&&this.visibleCollection.length<this.collection.length);var n=this.getEstimatedRowsPerPage();return this.addItemsToDom(n),e+n},e.prototype.addItemsToDom=function(t){var e=this.visibleCollection.length,n=this.visibleCollection.length?e:0,o=n+t-1;this.organizeItems(this.collection.slice(e),n,o);for(var i=e;i<this.collection.length;i++){var r=this.collection[i];if(!(i<=o))break;this.addItemToDOM(r)}this.flushBufferedItems(),this.updateNextButtonVisibility()},e.prototype.addItemToDOM=function(e,n){void 0===n&&(n=null);var o=this.getShortestColumn();o.addItem(e),t.prototype.addItemToDOM.call(this,e,o.elementRef)},e.prototype.endResize=function(){t.prototype.endResize.call(this),this.visibleCollection.length&&(this.visibleCollection.length=0,this.addColumns(),this.addUntilFill())},e.prototype.addColumns=function(){this.bodyElementRef.innerHTML="",this.columns=[];for(var t=this.getColumnWidth(),e=0;e<this.getEstimatedItemsPerRow();e++){var n=new r.Column({width:t,gap:this.options.gap});this.columns.push(n),this.bodyElementRef.appendChild(n.init())}},e.prototype.organizeItems=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=null);var o=this.getEstimatedItemsPerRow(),i=this.getColumnWidth(),r=n?o*(n-e+1):t.length;r=r>t.length?t.length:r;for(var s=0;s<r;s++){var l=t[s];l.last=!0,l.width=Math.floor(i),l.height=l.width*l.model.enlargedHeight/l.model.enlargedWidth,l.style()}},e.prototype.getColumnWidth=function(){var t=this.getEstimatedItemsPerRow();return Math.floor((this.width-(t-1)*this.options.gap)/t)},e.prototype.getShortestColumn=function(){return this.columns.reduce(function(t,e){return t?e.height<t.height?e:t:e})},e.prototype.empty=function(){t.prototype.empty.call(this),this.addColumns()},e}(n(21).AbstractGallery);e.Masonry=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.options=t,this.collection=[]}return t.prototype.init=function(){return this._elementRef=document.createElement("div"),this._elementRef.classList.add("column"),this._elementRef.style.marginRight=this.options.gap+"px",this._elementRef.style.width=this.options.width+"px",this._elementRef},t.prototype.addItem=function(t){this.collection.push(t)},Object.defineProperty(t.prototype,"height",{get:function(){return this._elementRef.offsetHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.collection.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elementRef",{get:function(){return this._elementRef},enumerable:!0,configurable:!0}),t}();e.Column=o},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,o,i){var r=t.call(this,e,n,o,i)||this;return r.elementRef=e,r.photoswipeElementRef=o,r.scrollElementRef=i,r}return i(e,t),e.prototype.getEstimatedItemsPerRow=function(){return Math.ceil((this.width+this.options.gap)/(this.options.rowHeight+this.options.gap))},e.prototype.organizeItems=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=null);var o=this.getEstimatedItemsPerRow(),i=this.getItemSideSize(),r=this.width-o*i-(o-1)*this.options.gap,s=n?o*(n-e+1):t.length;s=s>t.length?t.length:s;for(var l=0;l<s;l++){var a=t[l];a.last=l%o==o-1,a.row=Math.floor(l/o)+e,a.width=Math.floor(i),a.height=Math.floor(i),a.last&&(a.width=Math.floor(i+r)),a.style()}},e.prototype.getItemSideSize=function(){var t=this.getEstimatedItemsPerRow();return(this.width-(t-1)*this.options.gap)/t},e.prototype.getEstimatedRowsPerPage=function(){return Math.ceil(this.getGalleryVisibleHeight()/this.getItemSideSize())},e}(n(19).AbstractResponsiveRowGallery);e.ResponsiveSquare=r},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,o,i){var r=t.call(this,e,n,o,i)||this;if(r.elementRef=e,r.photoswipeElementRef=o,r.scrollElementRef=i,!n.itemsPerRow||n.itemsPerRow<=0)throw new Error("Option.itemsPerRow must be positive");return r}return i(e,t),e.prototype.getEstimatedItemsPerRow=function(){return this.options.itemsPerRow},e.prototype.organizeItems=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=null);var o=this.getItemSideSize(),i=n?this.options.itemsPerRow*(n-e+1):t.length;i=i>t.length?t.length:i;for(var r=0;r<i;r++){var s=t[r];s.width=Math.floor(o),s.height=Math.floor(o),s.last=r%this.options.itemsPerRow==this.options.itemsPerRow-1,s.row=Math.floor(r/this.options.itemsPerRow)+e,s.style()}},e.prototype.getEstimatedRowsPerPage=function(){return Math.ceil(this.getGalleryVisibleHeight()/this.getItemSideSize())},e.prototype.getItemSideSize=function(){var t=this.getEstimatedItemsPerRow();return(this.width-(t-1)*this.options.gap)/t},e}(n(20).AbstractRowGallery);e.Square=r},function(t,e,n){"use strict";n.r(e);var o=n(1),i=n(4),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;var l=function(t,e){if(Object(o.a)(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Object(i.a)(t))||(s.test(t)||!r.test(t)||null!=e&&t in Object(e))},a=n(10),c=Object(a.a)(Object,"create");var u=function(){this.__data__=c?c(null):{},this.size=0};var h=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},p="__lodash_hash_undefined__",f=Object.prototype.hasOwnProperty;var d=function(t){var e=this.__data__;if(c){var n=e[t];return n===p?void 0:n}return f.call(e,t)?e[t]:void 0},v=Object.prototype.hasOwnProperty;var g=function(t){var e=this.__data__;return c?void 0!==e[t]:v.call(e,t)},m="__lodash_hash_undefined__";var y=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=c&&void 0===e?m:e,this};function b(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}b.prototype.clear=u,b.prototype.delete=h,b.prototype.get=d,b.prototype.has=g,b.prototype.set=y;var _=b;var w=function(){this.__data__=[],this.size=0},j=n(7);var O=function(t,e){for(var n=t.length;n--;)if(Object(j.a)(t[n][0],e))return n;return-1},R=Array.prototype.splice;var P=function(t){var e=this.__data__,n=O(e,t);return!(n<0)&&(n==e.length-1?e.pop():R.call(e,n,1),--this.size,!0)};var E=function(t){var e=this.__data__,n=O(e,t);return n<0?void 0:e[n][1]};var I=function(t){return O(this.__data__,t)>-1};var x=function(t,e){var n=this.__data__,o=O(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this};function C(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}C.prototype.clear=w,C.prototype.delete=P,C.prototype.get=E,C.prototype.has=I,C.prototype.set=x;var S=C,L=n(3),M=Object(a.a)(L.a,"Map");var A=function(){this.size=0,this.__data__={hash:new _,map:new(M||S),string:new _}};var z=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var T=function(t,e){var n=t.__data__;return z(e)?n["string"==typeof e?"string":"hash"]:n.map};var H=function(t){var e=T(this,t).delete(t);return this.size-=e?1:0,e};var B=function(t){return T(this,t).get(t)};var k=function(t){return T(this,t).has(t)};var D=function(t,e){var n=T(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this};function W(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}W.prototype.clear=A,W.prototype.delete=H,W.prototype.get=B,W.prototype.has=k,W.prototype.set=D;var G=W,q="Expected a function";function F(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(q);var n=function(){var o=arguments,i=e?e.apply(this,o):o[0],r=n.cache;if(r.has(i))return r.get(i);var s=t.apply(this,o);return n.cache=r.set(i,s)||r,s};return n.cache=new(F.Cache||G),n}F.Cache=G;var N=F,U=500;var $=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,V=/\\(\\)?/g,J=function(t){var e=N(t,function(t){return n.size===U&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace($,function(t,n,o,i){e.push(o?i.replace(V,"$1"):n||t)}),e}),K=n(2);var Q=function(t,e){for(var n=-1,o=null==t?0:t.length,i=Array(o);++n<o;)i[n]=e(t[n],n,t);return i},X=1/0,Y=K.a?K.a.prototype:void 0,Z=Y?Y.toString:void 0;var tt=function t(e){if("string"==typeof e)return e;if(Object(o.a)(e))return Q(e,t)+"";if(Object(i.a)(e))return Z?Z.call(e):"";var n=e+"";return"0"==n&&1/e==-X?"-0":n};var et=function(t){return null==t?"":tt(t)};var nt=function(t,e){return Object(o.a)(t)?t:l(t,e)?[t]:J(et(t))},ot=1/0;var it=function(t){if("string"==typeof t||Object(i.a)(t))return t;var e=t+"";return"0"==e&&1/t==-ot?"-0":e};var rt=function(t,e){for(var n=0,o=(e=nt(e,t)).length;null!=t&&n<o;)t=t[it(e[n++])];return n&&n==o?t:void 0},st=n(12);var lt=function(t,e,n){"__proto__"==e&&st.a?Object(st.a)(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},at=Object.prototype.hasOwnProperty;var ct=function(t,e,n){var o=t[e];at.call(t,e)&&Object(j.a)(o,n)&&(void 0!==n||e in t)||lt(t,e,n)},ut=n(6),ht=n(0);var pt=function(t,e,n,o){if(!Object(ht.a)(t))return t;for(var i=-1,r=(e=nt(e,t)).length,s=r-1,l=t;null!=l&&++i<r;){var a=it(e[i]),c=n;if(i!=s){var u=l[a];void 0===(c=o?o(u,a,l):void 0)&&(c=Object(ht.a)(u)?u:Object(ut.a)(e[i+1])?[]:{})}ct(l,a,c),l=l[a]}return t};var ft=function(t,e,n){for(var o=-1,i=e.length,r={};++o<i;){var s=e[o],l=rt(t,s);n(l,s)&&pt(r,nt(s,t),l)}return r};var dt=function(t,e){return null!=t&&e in Object(t)},vt=n(11),gt=n(9);var mt=function(t,e,n){for(var i=-1,r=(e=nt(e,t)).length,s=!1;++i<r;){var l=it(e[i]);if(!(s=null!=t&&n(t,l)))break;t=t[l]}return s||++i!=r?s:!!(r=null==t?0:t.length)&&Object(gt.a)(r)&&Object(ut.a)(l,r)&&(Object(o.a)(t)||Object(vt.a)(t))};var yt=function(t,e){return null!=t&&mt(t,e,dt)};var bt=function(t,e){return ft(t,e,function(e,n){return yt(t,n)})};var _t=function(t,e){for(var n=-1,o=e.length,i=t.length;++n<o;)t[i+n]=e[n];return t},wt=K.a?K.a.isConcatSpreadable:void 0;var jt=function(t){return Object(o.a)(t)||Object(vt.a)(t)||!!(wt&&t&&t[wt])};var Ot=function t(e,n,o,i,r){var s=-1,l=e.length;for(o||(o=jt),r||(r=[]);++s<l;){var a=e[s];n>0&&o(a)?n>1?t(a,n-1,o,i,r):_t(r,a):i||(r[r.length]=a)}return r};var Rt=function(t){return(null==t?0:t.length)?Ot(t,1):[]},Pt=n(17),Et=n(16);var It=function(t){return Object(Et.a)(Object(Pt.a)(t,void 0,Rt),t+"")}(function(t,e){return null==t?{}:bt(t,e)});e.default=It},function(t,e,n){"use strict";n.r(e);var o=n(15),i=n(17),r=n(16);var s=function(t,e){return Object(r.a)(Object(i.a)(t,e,o.a),t+"")},l=n(7),a=n(14),c=n(9);var u=function(t){return null!=t&&Object(c.a)(t.length)&&!Object(a.a)(t)},h=n(6),p=n(0);var f=function(t,e,n){if(!Object(p.a)(n))return!1;var o=typeof e;return!!("number"==o?u(n)&&Object(h.a)(e,n.length):"string"==o&&e in n)&&Object(l.a)(n[e],t)};var d=function(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o},v=n(11),g=n(1),m=n(24),y=n(8),b=n(5),_={};_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_["[object Arguments]"]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object Boolean]"]=_["[object DataView]"]=_["[object Date]"]=_["[object Error]"]=_["[object Function]"]=_["[object Map]"]=_["[object Number]"]=_["[object Object]"]=_["[object RegExp]"]=_["[object Set]"]=_["[object String]"]=_["[object WeakMap]"]=!1;var w=function(t){return Object(b.a)(t)&&Object(c.a)(t.length)&&!!_[Object(y.a)(t)]};var j=function(t){return function(e){return t(e)}},O=n(18),R=O.a&&O.a.isTypedArray,P=R?j(R):w,E=Object.prototype.hasOwnProperty;var I=function(t,e){var n=Object(g.a)(t),o=!n&&Object(v.a)(t),i=!n&&!o&&Object(m.a)(t),r=!n&&!o&&!i&&P(t),s=n||o||i||r,l=s?d(t.length,String):[],a=l.length;for(var c in t)!e&&!E.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Object(h.a)(c,a))||l.push(c);return l},x=Object.prototype;var C=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||x)};var S=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},L=Object.prototype.hasOwnProperty;var M=function(t){if(!Object(p.a)(t))return S(t);var e=C(t),n=[];for(var o in t)("constructor"!=o||!e&&L.call(t,o))&&n.push(o);return n};var A=function(t){return u(t)?I(t,!0):M(t)},z=Object.prototype,T=z.hasOwnProperty,H=s(function(t,e){t=Object(t);var n=-1,o=e.length,i=o>2?e[2]:void 0;for(i&&f(e[0],e[1],i)&&(o=1);++n<o;)for(var r=e[n],s=A(r),a=-1,c=s.length;++a<c;){var u=s[a],h=t[u];(void 0===h||Object(l.a)(h,z[u])&&!T.call(t,u))&&(t[u]=r[u])}return t});e.default=H},function(t,e,n){"use strict";n.r(e);var o=n(0),i=n(3),r=function(){return i.a.Date.now()},s=n(4),l=NaN,a=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,h=/^0o[0-7]+$/i,p=parseInt;var f=function(t){if("number"==typeof t)return t;if(Object(s.a)(t))return l;if(Object(o.a)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Object(o.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=u.test(t);return n||h.test(t)?p(t.slice(2),n?2:8):c.test(t)?l:+t},d="Expected a function",v=Math.max,g=Math.min;e.default=function(t,e,n){var i,s,l,a,c,u,h=0,p=!1,m=!1,y=!0;if("function"!=typeof t)throw new TypeError(d);function b(e){var n=i,o=s;return i=s=void 0,h=e,a=t.apply(o,n)}function _(t){var n=t-u;return void 0===u||n>=e||n<0||m&&t-h>=l}function w(){var t=r();if(_(t))return j(t);c=setTimeout(w,function(t){var n=e-(t-u);return m?g(n,l-(t-h)):n}(t))}function j(t){return c=void 0,y&&i?b(t):(i=s=void 0,a)}function O(){var t=r(),n=_(t);if(i=arguments,s=this,u=t,n){if(void 0===c)return function(t){return h=t,c=setTimeout(w,e),p?b(t):a}(u);if(m)return clearTimeout(c),c=setTimeout(w,e),b(u)}return void 0===c&&(c=setTimeout(w,e)),a}return e=f(e)||0,Object(o.a)(n)&&(p=!!n.leading,l=(m="maxWait"in n)?v(f(n.maxWait)||0,e):l,y="trailing"in n?!!n.trailing:y),O.cancel=function(){void 0!==c&&clearTimeout(c),h=0,i=u=s=c=void 0},O.flush=function(){return void 0===c?a:j(r())},O}}])});
//# sourceMappingURL=natural-gallery.js.map